{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/rxjs/_esm5/internal/util/root.js","webpack:///./node_modules/custom-event-polyfill/polyfill.js","webpack:///./src/assets/javascripts/polyfill/details/index.ts","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/ramda/es/internal/_isPlaceholder.js","webpack:///./node_modules/ramda/es/internal/_curry1.js","webpack:///./node_modules/ramda/es/internal/_curry2.js","webpack:///./node_modules/ramda/es/internal/_isArray.js","webpack:///./node_modules/ramda/es/internal/_isTransformer.js","webpack:///./node_modules/ramda/es/internal/_dispatchable.js","webpack:///./node_modules/ramda/es/internal/_xfBase.js","webpack:///./node_modules/ramda/es/internal/_xfindLast.js","webpack:///./node_modules/ramda/es/findLast.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack:///./node_modules/rxjs/_esm5/internal/config.js","webpack:///./node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/Observer.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArray.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isObject.js","webpack:///./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscription.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/noop.js","webpack:///./node_modules/rxjs/_esm5/internal/util/pipe.js","webpack:///./node_modules/rxjs/_esm5/internal/Observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/toSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/canReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/map.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromEvent.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/InnerSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/iterator.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArrayLike.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeTo.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js","webpack:///./node_modules/rxjs/_esm5/internal/OuterSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isInteropObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/from.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/mergeMap.js","webpack:///./node_modules/rxjs/_esm5/internal/util/identity.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/mergeAll.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/merge.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/of.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/never.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/Action.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameAction.js","webpack:///./node_modules/rxjs/_esm5/internal/Scheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/animationFrame.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/dom/AjaxObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/dom/ajax.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/mapTo.js","webpack:///./node_modules/rxjs/_esm5/internal/Notification.js","webpack:///./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","webpack:///./node_modules/rxjs/_esm5/internal/SubjectSubscription.js","webpack:///./node_modules/rxjs/_esm5/internal/Subject.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/queue.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/empty.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/throwError.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/observeOn.js","webpack:///./node_modules/rxjs/_esm5/internal/ReplaySubject.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/shareReplay.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/switchMap.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/scan.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/async.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/delay.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isDate.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/tap.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js","webpack:///./node_modules/ramda/es/internal/_has.js","webpack:///./node_modules/ramda/es/internal/_isArguments.js","webpack:///./node_modules/ramda/es/keys.js","webpack:///./src/assets/javascripts/utilities/other/index.ts","webpack:///./src/assets/javascripts/ui/element/index.ts","webpack:///./node_modules/rxjs/_esm5/internal/observable/concat.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/concatAll.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/startWith.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/refCount.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/multicast.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/share.js","webpack:///./src/assets/javascripts/ui/location/index.ts","webpack:///./src/assets/javascripts/ui/media/index.ts","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromEventPattern.js","webpack:///./src/assets/javascripts/ui/viewport/index.ts","webpack:///./src/assets/javascripts/component/_/index.ts","webpack:///./node_modules/ramda/es/reverse.js","webpack:///./node_modules/ramda/es/internal/_isString.js","webpack:///./node_modules/ramda/es/internal/_arrayFromIterator.js","webpack:///./node_modules/ramda/es/internal/_includesWith.js","webpack:///./node_modules/ramda/es/internal/_objectIs.js","webpack:///./node_modules/ramda/es/type.js","webpack:///./node_modules/ramda/es/internal/_equals.js","webpack:///./node_modules/ramda/es/internal/_functionName.js","webpack:///./node_modules/ramda/es/equals.js","webpack:///./node_modules/ramda/es/internal/_includes.js","webpack:///./node_modules/ramda/es/internal/_indexOf.js","webpack:///./node_modules/ramda/es/internal/_Set.js","webpack:///./node_modules/ramda/es/difference.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/combineLatest.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/finalize.js","webpack:///./src/assets/javascripts/component/anchor/element/index.ts","webpack:///./src/assets/javascripts/component/header/_/index.ts","webpack:///./node_modules/rxjs/_esm5/internal/operators/distinctUntilKeyChanged.js","webpack:///./src/assets/javascripts/component/header/element/index.ts","webpack:///./node_modules/rxjs/_esm5/internal/operators/pluck.js","webpack:///./src/assets/javascripts/component/navigation/index.ts","webpack:///./src/assets/javascripts/component/sidebar/_/index.ts","webpack:///./src/assets/javascripts/component/sidebar/element/index.ts","webpack:///./src/assets/javascripts/index.ts","webpack:///./src/assets/javascripts/component/main/index.ts","webpack:///./src/assets/javascripts/component/anchor/_/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__window","window","__self","self","WorkerGlobalScope","_root","global","ce","CustomEvent","cancelable","preventDefault","defaultPrevented","Error","e","event","params","evt","origPrevent","bubbles","document","createEvent","initCustomEvent","detail","this","Event","addEventListener","details","createElement","innerHTML","style","display","body","appendChild","h0","offsetHeight","open","h1","removeChild","isSupported","documentElement","classList","add","querySelectorAll","forEach","summary","parentNode","hasAttribute","removeAttribute","setAttribute","g","Function","_isPlaceholder","a","_curry1","fn","f1","arguments","length","apply","_curry2","f2","b","_b","_a","Array","val","toString","_isTransformer","obj","_dispatchable","methodNames","xf","args","slice","pop","_isArray","idx","transducer","XFindLast","f","_xfBase","result","last","input","list","extendStatics","setPrototypeOf","__proto__","__extends","__","constructor","isFunction","x","_enable_super_gross_mode_that_will_cause_bad_things","config","Promise","undefined","stack","hostReportError","err","setTimeout","empty","closed","next","error","useDeprecatedSynchronousErrorHandling","complete","isArray","isObject","UnsubscriptionError","UnsubscriptionErrorImpl","errors","message","map","join","Subscription","unsubscribe","_parentOrParents","_subscriptions","_unsubscribe","remove","index","flattenUnsubscriptionErrors","len","sub","concat","push","teardown","subscription","EMPTY","tmp","indexOf","subscriptions","subscriptionIndex","splice","reduce","errs","rxSubscriber","Math","random","_super","Subscriber","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber","_parentSubscriber","observerOrNext","context","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","parent","observable","noop","pipe","fns","_i","pipeFromArray","prev","Observable","subscribe","_isScalar","_subscribe","lift","operator","source","sink","nextOrObserver","toSubscriber","_trySubscribe","observer","closed_1","canReportError","console","warn","promiseCtor","getPromiseCtor","resolve","reject","operations","toPromise","project","thisArg","TypeError","MapOperator","MapSubscriber","count","fromEvent","target","eventName","options","resultSelector","setupSubscription","sourceObj","handler","removeEventListener","isEventTarget","source_1","on","off","isJQueryStyleEventEmitter","source_2","addListener","removeListener","isNodeStyleEventEmitter","source_3","isScheduler","schedule","InnerSubscriber","outerValue","outerIndex","notifyNext","notifyError","notifyComplete","subscribeToArray","array","getSymbolIterator","iterator","isArrayLike","isPromise","then","subscribeTo","obs","promise","iterable","item","done","return","subscribeToResult","outerSubscriber","OuterSubscriber","innerValue","innerIndex","innerSub","scheduleArray","scheduler","scheduled","isInteropObservable","scheduleObservable","schedulePromise","isIterable","scheduleIterable","from","MergeMapOperator","concurrent","Number","POSITIVE_INFINITY","MergeMapSubscriber","hasCompleted","buffer","active","_tryNext","_innerSub","ish","innerSubscriber","shift","identity","mergeAll","mergeMap","ii","fromArray","merge","observables","of","NEVER","AsyncAction","work","pending","state","delay","id","recycleAsyncId","requestAsyncId","setInterval","flush","clearInterval","execute","_execute","errored","errorValue","actions","Action","AnimationFrameAction","requestAnimationFrame","cancelAnimationFrame","Scheduler","SchedulerAction","now","Date","AsyncScheduler","delegate","action","animationFrame","AnimationFrameScheduler","ajaxGet","url","headers","method","ajaxPost","ajaxDelete","ajaxPut","ajaxPatch","mapResponse","response","ajaxGetJSON","responseType","AjaxObservable","urlOrRequest","request","async","createXHR","crossDomain","root","XMLHttpRequest","XDomainRequest","getCORSRequest","progId","progIds","ActiveXObject","getXMLHttpRequest","withCredentials","timeout","prop","post","delete","put","patch","getJSON","AjaxSubscriber","getHeader","FormData","serializeBody","send","xhr","AjaxResponse","user","password","setupEvents","setHeaders","contentType","splitIndex","substring","keys","encodeURIComponent","JSON","stringify","setRequestHeader","headerName","toLowerCase","progressSubscriber","xhrTimeout","AjaxTimeoutError","ontimeout","upload","xhrProgress_1","xhrError_1","onprogress","AjaxError","onerror","xhrReadyStateChange","xhrLoad","readyState","status_1","status","responseText","onreadystatechange","onload","abort","originalEvent","parseXhrResponse","AjaxErrorImpl","parse","parseJson","responseXML","ajax","mapTo","MapToOperator","NotificationKind","MapToSubscriber","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","copy","asObservable","AnonymousSubject","QueueAction","queue","QueueScheduler","emptyScheduled","dispatch","Notification","kind","hasValue","observe","do","accept","toObservable","createNext","undefinedValueNotification","createError","createComplete","completeNotification","observeOn","ObserveOnOperator","ObserveOnSubscriber","arg","notification","scheduleMessage","ObserveOnMessage","ReplaySubject","bufferSize","windowTime","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","max","shareReplay","configOrBufferSize","refCount","_c","useRefCount","isComplete","shareReplayOperator","switchMap","SwitchMapOperator","SwitchMapSubscriber","innerSubscription","scan","accumulator","seed","hasSeed","ScanOperator","ScanSubscriber","_seed","set","configurable","delayFor","isNaN","abs","DelayOperator","DelaySubscriber","delay_1","_schedule","scheduleNotification","DelayMessage","tap","DoOperator","TapSubscriber","_tapNext","_tapError","_tapComplete","filter","predicate","FilterOperator","FilterSubscriber","_has","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","hasArgsEnumBug","contains","nIdx","ks","checkArgsLength","toggle","getElement","selector","node","querySelector","getElements","collection","concatAll","startWith","RefCountOperator","connectable","_refCount","refCounter","connection","connect","RefCountSubscriber","sharedConnection","_connection","ConnectableObservable","subjectFactory","_isComplete","getSubject","_subject","connectableObservableDescriptor","connectableProto","writable","ConnectableSubscriber","MulticastOperator","shareSubjectFactory","share","subjectOrSubjectFactory","hashchange$","popstate$","watchMedia","query","media","matchMedia","fromEventPattern","addHandler","removeHandler","retValue","matches","scroll$","resize$","getViewportOffset","pageXOffset","y","pageYOffset","getViewportSize","width","innerWidth","height","innerHeight","pluckComponent","split","reverse","_arrayFromIterator","iter","_includesWith","pred","_uniqContentEquals","aIterator","bIterator","stackA","stackB","eq","_equals","aItem","match","typeA","equals","String","valueOf","ignoreCase","multiline","sticky","unicode","size","entries","values","keysA","extendedStackA","extendedStackB","_includes","inf","_indexOf","hasOrAdd","shouldAdd","prevSize","type","Infinity","_items","_nativeSet","has","bIdx","_Set","Set","first","second","out","firstLen","secondLen","toFilterOut","NONE","combineLatest","CombineLatestOperator","CombineLatestSubscriber","toRespond","unused","oldVal","_tryResultSelector","distinctUntilChanged","compare","keySelector","DistinctUntilChangedOperator","DistinctUntilChangedSubscriber","hasKey","finalize","callback","FinallyOperator","FinallySubscriber","setAnchorBlur","el","resetAnchorBlur","setAnchorActive","resetAnchorActive","paintHeaderShadow","setHeaderShadow","resetHeaderShadow","pluck","properties","props","currentProp","plucker","setNavigationOverflowScrolling","background","webkitOverflowScrolling","watchSidebar","offset$","main$","adjust","parseFloat","getComputedStyle","parentElement","getPropertyValue","height$","offset","min","lock$","lock","paintSidebar","setSidebarHeight","setSidebarLock","resetSidebarHeight","resetSidebarLock","aboveScreen$","belowScreen$","aboveTablet$","location$","names","init$","location","href","components$","Document","load","includes","replaceWith","size$","adjust$","header$","top","offsetTop","bottom","active$","watchMain","els","table","Map","decodeURIComponent","hash","header","path","anchor","tagName","watchAnchorList","begin","end","paintAnchorList","ev","HTMLAnchorElement","test","getAttribute","log","history","pushState","index$","label","htmlFor","watchNavigationIndex","checked","parseInt","maxHeight","transitionDuration","hash$","Boolean","HTMLDetailsElement","drawerToggle","searchToggle","setToggle","dispatchEvent","app","focus"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar __window = typeof window !== 'undefined' && window;\nvar __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&\n    self instanceof WorkerGlobalScope && self;\nvar __global = typeof global !== 'undefined' && global;\nvar _root = __window || __global || __self;\n/*@__PURE__*/ (function () {\n    if (!_root) {\n        throw /*@__PURE__*/ new Error('RxJS could not find any global context (window, self, global)');\n    }\n})();\nexport { _root as root };\n//# sourceMappingURL=root.js.map\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\n/* ----------------------------------------------------------------------------\n * Helper functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Check if browser supports the `<details>` tag\n *\n * As this polyfill is executed at the end of `<body>`, not all checks from the\n * original source were necessary, so the script was stripped down a little.\n *\n * @see https://bit.ly/2O1teyP - Original source\n *\n * @return Test result\n */\nfunction isSupported(): boolean {\n  const details = document.createElement(\"details\")\n  if (!(\"open\" in details))\n    return false\n\n  /* Insert summary and append element */\n  details.innerHTML = \"<summary>_</summary>_\"\n  details.style.display = \"block\"\n  document.body.appendChild(details)\n\n  /* Measure height difference */\n  const h0 = details.offsetHeight\n  details.open = true\n  const h1 = details.offsetHeight\n\n  /* Remove element and return test result */\n  document.body.removeChild(details)\n  return h1 - h0 !== 0\n}\n\n/* ----------------------------------------------------------------------------\n * Polyfill\n * ------------------------------------------------------------------------- */\n\n/* Execute polyfill when DOM is available */\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (isSupported())\n    return\n\n  /* Indicate presence of details polyfill */\n  document.documentElement.classList.add(\"no-details\")\n\n  /* Retrieve all summaries and polyfill open/close functionality */\n  const summaries = document.querySelectorAll(\"details > summary\")\n  summaries.forEach(summary => {\n    summary.addEventListener(\"click\", () => {\n      const details = summary.parentNode as HTMLElement\n      if (details.hasAttribute(\"open\")) {\n        details.removeAttribute(\"open\")\n      } else {\n        details.setAttribute(\"open\", \"\")\n      }\n    })\n  })\n})\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default function _isPlaceholder(a) {\n       return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}","import _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}","import _curry1 from './_curry1.js';\nimport _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}","/**\n * Tests whether or not an object is an array.\n *\n * @private\n * @param {*} val The object to test.\n * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n * @example\n *\n *      _isArray([]); //=> true\n *      _isArray(null); //=> false\n *      _isArray({}); //=> false\n */\nexport default Array.isArray || function _isArray(val) {\n  return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';\n};","export default function _isTransformer(obj) {\n  return obj != null && typeof obj['@@transducer/step'] === 'function';\n}","import _isArray from './_isArray.js';\nimport _isTransformer from './_isTransformer.js';\n\n/**\n * Returns a function that dispatches with different strategies based on the\n * object in list position (last argument). If it is an array, executes [fn].\n * Otherwise, if it has a function with one of the given method names, it will\n * execute that function (functor case). Otherwise, if it is a transformer,\n * uses transducer [xf] to return a new transformer (transducer case).\n * Otherwise, it will default to executing [fn].\n *\n * @private\n * @param {Array} methodNames properties to check for a custom implementation\n * @param {Function} xf transducer to initialize if object is transformer\n * @param {Function} fn default ramda implementation\n * @return {Function} A function that dispatches on object in list position\n */\nexport default function _dispatchable(methodNames, xf, fn) {\n  return function () {\n    if (arguments.length === 0) {\n      return fn();\n    }\n    var args = Array.prototype.slice.call(arguments, 0);\n    var obj = args.pop();\n    if (!_isArray(obj)) {\n      var idx = 0;\n      while (idx < methodNames.length) {\n        if (typeof obj[methodNames[idx]] === 'function') {\n          return obj[methodNames[idx]].apply(obj, args);\n        }\n        idx += 1;\n      }\n      if (_isTransformer(obj)) {\n        var transducer = xf.apply(null, args);\n        return transducer(obj);\n      }\n    }\n    return fn.apply(this, arguments);\n  };\n}","export default {\n  init: function () {\n    return this.xf['@@transducer/init']();\n  },\n  result: function (result) {\n    return this.xf['@@transducer/result'](result);\n  }\n};","import _curry2 from './_curry2.js';\nimport _xfBase from './_xfBase.js';\n\nvar XFindLast = /*#__PURE__*/function () {\n  function XFindLast(f, xf) {\n    this.xf = xf;\n    this.f = f;\n  }\n  XFindLast.prototype['@@transducer/init'] = _xfBase.init;\n  XFindLast.prototype['@@transducer/result'] = function (result) {\n    return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.last));\n  };\n  XFindLast.prototype['@@transducer/step'] = function (result, input) {\n    if (this.f(input)) {\n      this.last = input;\n    }\n    return result;\n  };\n\n  return XFindLast;\n}();\n\nvar _xfindLast = /*#__PURE__*/_curry2(function _xfindLast(f, xf) {\n  return new XFindLast(f, xf);\n});\nexport default _xfindLast;","import _curry2 from './internal/_curry2.js';\nimport _dispatchable from './internal/_dispatchable.js';\nimport _xfindLast from './internal/_xfindLast.js';\n\n/**\n * Returns the last element of the list which matches the predicate, or\n * `undefined` if no element matches.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.1.1\n * @category List\n * @sig (a -> Boolean) -> [a] -> a | undefined\n * @param {Function} fn The predicate function used to determine if the element is the\n * desired one.\n * @param {Array} list The array to consider.\n * @return {Object} The element found, or `undefined`.\n * @see R.transduce\n * @example\n *\n *      const xs = [{a: 1, b: 0}, {a:1, b: 1}];\n *      R.findLast(R.propEq('a', 1))(xs); //=> {a: 1, b: 1}\n *      R.findLast(R.propEq('a', 4))(xs); //=> undefined\n */\nvar findLast = /*#__PURE__*/_curry2( /*#__PURE__*/_dispatchable([], _xfindLast, function findLast(fn, list) {\n  var idx = list.length - 1;\n  while (idx >= 0) {\n    if (fn(list[idx])) {\n      return list[idx];\n    }\n    idx -= 1;\n  }\n}));\nexport default findLast;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nvar toString = /*@__PURE__*/ (function () { return Object.prototype.toString; })();\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        function handler(e) {\n            if (arguments.length > 1) {\n                subscriber.next(Array.prototype.slice.call(arguments));\n            }\n            else {\n                subscriber.next(e);\n            }\n        }\n        setupSubscription(target, eventName, handler, subscriber, options);\n    });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n    var unsubscribe;\n    if (isEventTarget(sourceObj)) {\n        var source_1 = sourceObj;\n        sourceObj.addEventListener(eventName, handler, options);\n        unsubscribe = function () { return source_1.removeEventListener(eventName, handler, options); };\n    }\n    else if (isJQueryStyleEventEmitter(sourceObj)) {\n        var source_2 = sourceObj;\n        sourceObj.on(eventName, handler);\n        unsubscribe = function () { return source_2.off(eventName, handler); };\n    }\n    else if (isNodeStyleEventEmitter(sourceObj)) {\n        var source_3 = sourceObj;\n        sourceObj.addListener(eventName, handler);\n        unsubscribe = function () { return source_3.removeListener(eventName, handler); };\n    }\n    else if (sourceObj && sourceObj.length) {\n        for (var i = 0, len = sourceObj.length; i < len; i++) {\n            setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n        }\n    }\n    else {\n        throw new TypeError('Invalid event target');\n    }\n    subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n    return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n//# sourceMappingURL=fromEvent.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (!!result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, destination) {\n    if (destination === void 0) {\n        destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (destination.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(destination);\n    }\n    return subscribeTo(result)(destination);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */\nimport { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=scheduled.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function isInteropObservable(input) {\n    return input && typeof input[Symbol_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function scheduleObservable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[Symbol_observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function schedulePromise(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            });\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=schedulePromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function isIterable(input) {\n    return input && typeof input[Symbol_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[Symbol_iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { scheduled } from '../scheduled/scheduled';\nexport function from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    else {\n        return scheduled(input, scheduler);\n    }\n}\n//# sourceMappingURL=from.js.map\n","/** PURE_IMPORTS_START tslib,_util_subscribeToResult,_OuterSubscriber,_InnerSubscriber,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexport { MergeMapOperator };\nvar MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        var innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        subscribeToResult(this, ish, value, index, innerSubscriber);\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\nexport { MergeMapSubscriber };\n//# sourceMappingURL=mergeMap.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n","/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isScheduler } from '../util/isScheduler';\nimport { mergeAll } from '../operators/mergeAll';\nimport { fromArray } from './fromArray';\nexport function merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n//# sourceMappingURL=merge.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START _Observable,_util_noop PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { noop } from '../util/noop';\nexport var NEVER = /*@__PURE__*/ new Observable(noop);\nexport function never() {\n    return NEVER;\n}\n//# sourceMappingURL=never.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar AnimationFrameAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnimationFrameAction, _super);\n    function AnimationFrameAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AnimationFrameAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(function () { return scheduler.flush(null); }));\n    };\n    AnimationFrameAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        if (scheduler.actions.length === 0) {\n            cancelAnimationFrame(id);\n            scheduler.scheduled = undefined;\n        }\n        return undefined;\n    };\n    return AnimationFrameAction;\n}(AsyncAction));\nexport { AnimationFrameAction };\n//# sourceMappingURL=AnimationFrameAction.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START _AnimationFrameAction,_AnimationFrameScheduler PURE_IMPORTS_END */\nimport { AnimationFrameAction } from './AnimationFrameAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\nexport var animationFrame = /*@__PURE__*/ new AnimationFrameScheduler(AnimationFrameAction);\n//# sourceMappingURL=animationFrame.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar AnimationFrameScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnimationFrameScheduler, _super);\n    function AnimationFrameScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationFrameScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AnimationFrameScheduler;\n}(AsyncScheduler));\nexport { AnimationFrameScheduler };\n//# sourceMappingURL=AnimationFrameScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_.._util_root,_.._Observable,_.._Subscriber,_.._operators_map PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { root } from '../../util/root';\nimport { Observable } from '../../Observable';\nimport { Subscriber } from '../../Subscriber';\nimport { map } from '../../operators/map';\nfunction getCORSRequest() {\n    if (root.XMLHttpRequest) {\n        return new root.XMLHttpRequest();\n    }\n    else if (!!root.XDomainRequest) {\n        return new root.XDomainRequest();\n    }\n    else {\n        throw new Error('CORS is not supported by your browser');\n    }\n}\nfunction getXMLHttpRequest() {\n    if (root.XMLHttpRequest) {\n        return new root.XMLHttpRequest();\n    }\n    else {\n        var progId = void 0;\n        try {\n            var progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'];\n            for (var i = 0; i < 3; i++) {\n                try {\n                    progId = progIds[i];\n                    if (new root.ActiveXObject(progId)) {\n                        break;\n                    }\n                }\n                catch (e) {\n                }\n            }\n            return new root.ActiveXObject(progId);\n        }\n        catch (e) {\n            throw new Error('XMLHttpRequest is not supported by your browser');\n        }\n    }\n}\nexport function ajaxGet(url, headers) {\n    if (headers === void 0) {\n        headers = null;\n    }\n    return new AjaxObservable({ method: 'GET', url: url, headers: headers });\n}\nexport function ajaxPost(url, body, headers) {\n    return new AjaxObservable({ method: 'POST', url: url, body: body, headers: headers });\n}\nexport function ajaxDelete(url, headers) {\n    return new AjaxObservable({ method: 'DELETE', url: url, headers: headers });\n}\nexport function ajaxPut(url, body, headers) {\n    return new AjaxObservable({ method: 'PUT', url: url, body: body, headers: headers });\n}\nexport function ajaxPatch(url, body, headers) {\n    return new AjaxObservable({ method: 'PATCH', url: url, body: body, headers: headers });\n}\nvar mapResponse = /*@__PURE__*/ map(function (x, index) { return x.response; });\nexport function ajaxGetJSON(url, headers) {\n    return mapResponse(new AjaxObservable({\n        method: 'GET',\n        url: url,\n        responseType: 'json',\n        headers: headers\n    }));\n}\nvar AjaxObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AjaxObservable, _super);\n    function AjaxObservable(urlOrRequest) {\n        var _this = _super.call(this) || this;\n        var request = {\n            async: true,\n            createXHR: function () {\n                return this.crossDomain ? getCORSRequest() : getXMLHttpRequest();\n            },\n            crossDomain: true,\n            withCredentials: false,\n            headers: {},\n            method: 'GET',\n            responseType: 'json',\n            timeout: 0\n        };\n        if (typeof urlOrRequest === 'string') {\n            request.url = urlOrRequest;\n        }\n        else {\n            for (var prop in urlOrRequest) {\n                if (urlOrRequest.hasOwnProperty(prop)) {\n                    request[prop] = urlOrRequest[prop];\n                }\n            }\n        }\n        _this.request = request;\n        return _this;\n    }\n    AjaxObservable.prototype._subscribe = function (subscriber) {\n        return new AjaxSubscriber(subscriber, this.request);\n    };\n    AjaxObservable.create = (function () {\n        var create = function (urlOrRequest) {\n            return new AjaxObservable(urlOrRequest);\n        };\n        create.get = ajaxGet;\n        create.post = ajaxPost;\n        create.delete = ajaxDelete;\n        create.put = ajaxPut;\n        create.patch = ajaxPatch;\n        create.getJSON = ajaxGetJSON;\n        return create;\n    })();\n    return AjaxObservable;\n}(Observable));\nexport { AjaxObservable };\nvar AjaxSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AjaxSubscriber, _super);\n    function AjaxSubscriber(destination, request) {\n        var _this = _super.call(this, destination) || this;\n        _this.request = request;\n        _this.done = false;\n        var headers = request.headers = request.headers || {};\n        if (!request.crossDomain && !_this.getHeader(headers, 'X-Requested-With')) {\n            headers['X-Requested-With'] = 'XMLHttpRequest';\n        }\n        var contentTypeHeader = _this.getHeader(headers, 'Content-Type');\n        if (!contentTypeHeader && !(root.FormData && request.body instanceof root.FormData) && typeof request.body !== 'undefined') {\n            headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n        }\n        request.body = _this.serializeBody(request.body, _this.getHeader(request.headers, 'Content-Type'));\n        _this.send();\n        return _this;\n    }\n    AjaxSubscriber.prototype.next = function (e) {\n        this.done = true;\n        var _a = this, xhr = _a.xhr, request = _a.request, destination = _a.destination;\n        var result;\n        try {\n            result = new AjaxResponse(e, xhr, request);\n        }\n        catch (err) {\n            return destination.error(err);\n        }\n        destination.next(result);\n    };\n    AjaxSubscriber.prototype.send = function () {\n        var _a = this, request = _a.request, _b = _a.request, user = _b.user, method = _b.method, url = _b.url, async = _b.async, password = _b.password, headers = _b.headers, body = _b.body;\n        try {\n            var xhr = this.xhr = request.createXHR();\n            this.setupEvents(xhr, request);\n            if (user) {\n                xhr.open(method, url, async, user, password);\n            }\n            else {\n                xhr.open(method, url, async);\n            }\n            if (async) {\n                xhr.timeout = request.timeout;\n                xhr.responseType = request.responseType;\n            }\n            if ('withCredentials' in xhr) {\n                xhr.withCredentials = !!request.withCredentials;\n            }\n            this.setHeaders(xhr, headers);\n            if (body) {\n                xhr.send(body);\n            }\n            else {\n                xhr.send();\n            }\n        }\n        catch (err) {\n            this.error(err);\n        }\n    };\n    AjaxSubscriber.prototype.serializeBody = function (body, contentType) {\n        if (!body || typeof body === 'string') {\n            return body;\n        }\n        else if (root.FormData && body instanceof root.FormData) {\n            return body;\n        }\n        if (contentType) {\n            var splitIndex = contentType.indexOf(';');\n            if (splitIndex !== -1) {\n                contentType = contentType.substring(0, splitIndex);\n            }\n        }\n        switch (contentType) {\n            case 'application/x-www-form-urlencoded':\n                return Object.keys(body).map(function (key) { return encodeURIComponent(key) + \"=\" + encodeURIComponent(body[key]); }).join('&');\n            case 'application/json':\n                return JSON.stringify(body);\n            default:\n                return body;\n        }\n    };\n    AjaxSubscriber.prototype.setHeaders = function (xhr, headers) {\n        for (var key in headers) {\n            if (headers.hasOwnProperty(key)) {\n                xhr.setRequestHeader(key, headers[key]);\n            }\n        }\n    };\n    AjaxSubscriber.prototype.getHeader = function (headers, headerName) {\n        for (var key in headers) {\n            if (key.toLowerCase() === headerName.toLowerCase()) {\n                return headers[key];\n            }\n        }\n        return undefined;\n    };\n    AjaxSubscriber.prototype.setupEvents = function (xhr, request) {\n        var progressSubscriber = request.progressSubscriber;\n        function xhrTimeout(e) {\n            var _a = xhrTimeout, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\n            if (progressSubscriber) {\n                progressSubscriber.error(e);\n            }\n            var error;\n            try {\n                error = new AjaxTimeoutError(this, request);\n            }\n            catch (err) {\n                error = err;\n            }\n            subscriber.error(error);\n        }\n        xhr.ontimeout = xhrTimeout;\n        xhrTimeout.request = request;\n        xhrTimeout.subscriber = this;\n        xhrTimeout.progressSubscriber = progressSubscriber;\n        if (xhr.upload && 'withCredentials' in xhr) {\n            if (progressSubscriber) {\n                var xhrProgress_1;\n                xhrProgress_1 = function (e) {\n                    var progressSubscriber = xhrProgress_1.progressSubscriber;\n                    progressSubscriber.next(e);\n                };\n                if (root.XDomainRequest) {\n                    xhr.onprogress = xhrProgress_1;\n                }\n                else {\n                    xhr.upload.onprogress = xhrProgress_1;\n                }\n                xhrProgress_1.progressSubscriber = progressSubscriber;\n            }\n            var xhrError_1;\n            xhrError_1 = function (e) {\n                var _a = xhrError_1, progressSubscriber = _a.progressSubscriber, subscriber = _a.subscriber, request = _a.request;\n                if (progressSubscriber) {\n                    progressSubscriber.error(e);\n                }\n                var error;\n                try {\n                    error = new AjaxError('ajax error', this, request);\n                }\n                catch (err) {\n                    error = err;\n                }\n                subscriber.error(error);\n            };\n            xhr.onerror = xhrError_1;\n            xhrError_1.request = request;\n            xhrError_1.subscriber = this;\n            xhrError_1.progressSubscriber = progressSubscriber;\n        }\n        function xhrReadyStateChange(e) {\n            return;\n        }\n        xhr.onreadystatechange = xhrReadyStateChange;\n        xhrReadyStateChange.subscriber = this;\n        xhrReadyStateChange.progressSubscriber = progressSubscriber;\n        xhrReadyStateChange.request = request;\n        function xhrLoad(e) {\n            var _a = xhrLoad, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\n            if (this.readyState === 4) {\n                var status_1 = this.status === 1223 ? 204 : this.status;\n                var response = (this.responseType === 'text' ? (this.response || this.responseText) : this.response);\n                if (status_1 === 0) {\n                    status_1 = response ? 200 : 0;\n                }\n                if (status_1 < 400) {\n                    if (progressSubscriber) {\n                        progressSubscriber.complete();\n                    }\n                    subscriber.next(e);\n                    subscriber.complete();\n                }\n                else {\n                    if (progressSubscriber) {\n                        progressSubscriber.error(e);\n                    }\n                    var error = void 0;\n                    try {\n                        error = new AjaxError('ajax error ' + status_1, this, request);\n                    }\n                    catch (err) {\n                        error = err;\n                    }\n                    subscriber.error(error);\n                }\n            }\n        }\n        xhr.onload = xhrLoad;\n        xhrLoad.subscriber = this;\n        xhrLoad.progressSubscriber = progressSubscriber;\n        xhrLoad.request = request;\n    };\n    AjaxSubscriber.prototype.unsubscribe = function () {\n        var _a = this, done = _a.done, xhr = _a.xhr;\n        if (!done && xhr && xhr.readyState !== 4 && typeof xhr.abort === 'function') {\n            xhr.abort();\n        }\n        _super.prototype.unsubscribe.call(this);\n    };\n    return AjaxSubscriber;\n}(Subscriber));\nexport { AjaxSubscriber };\nvar AjaxResponse = /*@__PURE__*/ (function () {\n    function AjaxResponse(originalEvent, xhr, request) {\n        this.originalEvent = originalEvent;\n        this.xhr = xhr;\n        this.request = request;\n        this.status = xhr.status;\n        this.responseType = xhr.responseType || request.responseType;\n        this.response = parseXhrResponse(this.responseType, xhr);\n    }\n    return AjaxResponse;\n}());\nexport { AjaxResponse };\nvar AjaxErrorImpl = /*@__PURE__*/ (function () {\n    function AjaxErrorImpl(message, xhr, request) {\n        Error.call(this);\n        this.message = message;\n        this.name = 'AjaxError';\n        this.xhr = xhr;\n        this.request = request;\n        this.status = xhr.status;\n        this.responseType = xhr.responseType || request.responseType;\n        this.response = parseXhrResponse(this.responseType, xhr);\n        return this;\n    }\n    AjaxErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return AjaxErrorImpl;\n})();\nexport var AjaxError = AjaxErrorImpl;\nfunction parseJson(xhr) {\n    if ('response' in xhr) {\n        return xhr.responseType ? xhr.response : JSON.parse(xhr.response || xhr.responseText || 'null');\n    }\n    else {\n        return JSON.parse(xhr.responseText || 'null');\n    }\n}\nfunction parseXhrResponse(responseType, xhr) {\n    switch (responseType) {\n        case 'json':\n            return parseJson(xhr);\n        case 'xml':\n            return xhr.responseXML;\n        case 'text':\n        default:\n            return ('response' in xhr) ? xhr.response : xhr.responseText;\n    }\n}\nfunction AjaxTimeoutErrorImpl(xhr, request) {\n    AjaxError.call(this, 'ajax timeout', xhr, request);\n    this.name = 'AjaxTimeoutError';\n    return this;\n}\nexport var AjaxTimeoutError = AjaxTimeoutErrorImpl;\n//# sourceMappingURL=AjaxObservable.js.map\n","/** PURE_IMPORTS_START _AjaxObservable PURE_IMPORTS_END */\nimport { AjaxObservable } from './AjaxObservable';\nexport var ajax = /*@__PURE__*/ (function () { return AjaxObservable.create; })();\n//# sourceMappingURL=ajax.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function mapTo(value) {\n    return function (source) { return source.lift(new MapToOperator(value)); };\n}\nvar MapToOperator = /*@__PURE__*/ (function () {\n    function MapToOperator(value) {\n        this.value = value;\n    }\n    MapToOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapToSubscriber(subscriber, this.value));\n    };\n    return MapToOperator;\n}());\nvar MapToSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapToSubscriber, _super);\n    function MapToSubscriber(destination, value) {\n        var _this = _super.call(this, destination) || this;\n        _this.value = value;\n        return _this;\n    }\n    MapToSubscriber.prototype._next = function (x) {\n        this.destination.next(this.value);\n    };\n    return MapToSubscriber;\n}(Subscriber));\n//# sourceMappingURL=mapTo.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queue = /*@__PURE__*/ new QueueScheduler(QueueAction);\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","/** PURE_IMPORTS_START _ReplaySubject PURE_IMPORTS_END */\nimport { ReplaySubject } from '../ReplaySubject';\nexport function shareReplay(configOrBufferSize, windowTime, scheduler) {\n    var config;\n    if (configOrBufferSize && typeof configOrBufferSize === 'object') {\n        config = configOrBufferSize;\n    }\n    else {\n        config = {\n            bufferSize: configOrBufferSize,\n            windowTime: windowTime,\n            refCount: false,\n            scheduler: scheduler\n        };\n    }\n    return function (source) { return source.lift(shareReplayOperator(config)); };\n}\nfunction shareReplayOperator(_a) {\n    var _b = _a.bufferSize, bufferSize = _b === void 0 ? Number.POSITIVE_INFINITY : _b, _c = _a.windowTime, windowTime = _c === void 0 ? Number.POSITIVE_INFINITY : _c, useRefCount = _a.refCount, scheduler = _a.scheduler;\n    var subject;\n    var refCount = 0;\n    var subscription;\n    var hasError = false;\n    var isComplete = false;\n    return function shareReplayOperation(source) {\n        refCount++;\n        if (!subject || hasError) {\n            hasError = false;\n            subject = new ReplaySubject(bufferSize, windowTime, scheduler);\n            subscription = source.subscribe({\n                next: function (value) { subject.next(value); },\n                error: function (err) {\n                    hasError = true;\n                    subject.error(err);\n                },\n                complete: function () {\n                    isComplete = true;\n                    subject.complete();\n                },\n            });\n        }\n        var innerSub = subject.subscribe(this);\n        this.add(function () {\n            refCount--;\n            innerSub.unsubscribe();\n            if (subscription && !isComplete && useRefCount && refCount === 0) {\n                subscription.unsubscribe();\n                subscription = undefined;\n                subject = undefined;\n            }\n        });\n    };\n}\n//# sourceMappingURL=shareReplay.js.map\n","/** PURE_IMPORTS_START tslib,_OuterSubscriber,_InnerSubscriber,_util_subscribeToResult,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function switchMap(project, resultSelector) {\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(switchMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); })); };\n    }\n    return function (source) { return source.lift(new SwitchMapOperator(project)); };\n}\nvar SwitchMapOperator = /*@__PURE__*/ (function () {\n    function SwitchMapOperator(project) {\n        this.project = project;\n    }\n    SwitchMapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new SwitchMapSubscriber(subscriber, this.project));\n    };\n    return SwitchMapOperator;\n}());\nvar SwitchMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SwitchMapSubscriber, _super);\n    function SwitchMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.index = 0;\n        return _this;\n    }\n    SwitchMapSubscriber.prototype._next = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (error) {\n            this.destination.error(error);\n            return;\n        }\n        this._innerSub(result, value, index);\n    };\n    SwitchMapSubscriber.prototype._innerSub = function (result, value, index) {\n        var innerSubscription = this.innerSubscription;\n        if (innerSubscription) {\n            innerSubscription.unsubscribe();\n        }\n        var innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        this.innerSubscription = subscribeToResult(this, result, value, index, innerSubscriber);\n    };\n    SwitchMapSubscriber.prototype._complete = function () {\n        var innerSubscription = this.innerSubscription;\n        if (!innerSubscription || innerSubscription.closed) {\n            _super.prototype._complete.call(this);\n        }\n        this.unsubscribe();\n    };\n    SwitchMapSubscriber.prototype._unsubscribe = function () {\n        this.innerSubscription = null;\n    };\n    SwitchMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var destination = this.destination;\n        destination.remove(innerSub);\n        this.innerSubscription = null;\n        if (this.isStopped) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    return SwitchMapSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=switchMap.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function scan(accumulator, seed) {\n    var hasSeed = false;\n    if (arguments.length >= 2) {\n        hasSeed = true;\n    }\n    return function scanOperatorFunction(source) {\n        return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n    };\n}\nvar ScanOperator = /*@__PURE__*/ (function () {\n    function ScanOperator(accumulator, seed, hasSeed) {\n        if (hasSeed === void 0) {\n            hasSeed = false;\n        }\n        this.accumulator = accumulator;\n        this.seed = seed;\n        this.hasSeed = hasSeed;\n    }\n    ScanOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n    };\n    return ScanOperator;\n}());\nvar ScanSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber));\n//# sourceMappingURL=scan.js.map\n","/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var async = /*@__PURE__*/ new AsyncScheduler(AsyncAction);\n//# sourceMappingURL=async.js.map\n","/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function delay(delay, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    var absoluteDelay = isDate(delay);\n    var delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(delay);\n    return function (source) { return source.lift(new DelayOperator(delayFor, scheduler)); };\n}\nvar DelayOperator = /*@__PURE__*/ (function () {\n    function DelayOperator(delay, scheduler) {\n        this.delay = delay;\n        this.scheduler = scheduler;\n    }\n    DelayOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n    };\n    return DelayOperator;\n}());\nvar DelaySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DelaySubscriber, _super);\n    function DelaySubscriber(destination, delay, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.delay = delay;\n        _this.scheduler = scheduler;\n        _this.queue = [];\n        _this.active = false;\n        _this.errored = false;\n        return _this;\n    }\n    DelaySubscriber.dispatch = function (state) {\n        var source = state.source;\n        var queue = source.queue;\n        var scheduler = state.scheduler;\n        var destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay_1);\n        }\n        else {\n            this.unsubscribe();\n            source.active = false;\n        }\n    };\n    DelaySubscriber.prototype._schedule = function (scheduler) {\n        this.active = true;\n        var destination = this.destination;\n        destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    };\n    DelaySubscriber.prototype.scheduleNotification = function (notification) {\n        if (this.errored === true) {\n            return;\n        }\n        var scheduler = this.scheduler;\n        var message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    };\n    DelaySubscriber.prototype._next = function (value) {\n        this.scheduleNotification(Notification.createNext(value));\n    };\n    DelaySubscriber.prototype._error = function (err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    DelaySubscriber.prototype._complete = function () {\n        this.scheduleNotification(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return DelaySubscriber;\n}(Subscriber));\nvar DelayMessage = /*@__PURE__*/ (function () {\n    function DelayMessage(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n    return DelayMessage;\n}());\n//# sourceMappingURL=delay.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isDate(value) {\n    return value instanceof Date && !isNaN(+value);\n}\n//# sourceMappingURL=isDate.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_util_noop,_util_isFunction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { noop } from '../util/noop';\nimport { isFunction } from '../util/isFunction';\nexport function tap(nextOrObserver, error, complete) {\n    return function tapOperatorFunction(source) {\n        return source.lift(new DoOperator(nextOrObserver, error, complete));\n    };\n}\nvar DoOperator = /*@__PURE__*/ (function () {\n    function DoOperator(nextOrObserver, error, complete) {\n        this.nextOrObserver = nextOrObserver;\n        this.error = error;\n        this.complete = complete;\n    }\n    DoOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TapSubscriber(subscriber, this.nextOrObserver, this.error, this.complete));\n    };\n    return DoOperator;\n}());\nvar TapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TapSubscriber, _super);\n    function TapSubscriber(destination, observerOrNext, error, complete) {\n        var _this = _super.call(this, destination) || this;\n        _this._tapNext = noop;\n        _this._tapError = noop;\n        _this._tapComplete = noop;\n        _this._tapError = error || noop;\n        _this._tapComplete = complete || noop;\n        if (isFunction(observerOrNext)) {\n            _this._context = _this;\n            _this._tapNext = observerOrNext;\n        }\n        else if (observerOrNext) {\n            _this._context = observerOrNext;\n            _this._tapNext = observerOrNext.next || noop;\n            _this._tapError = observerOrNext.error || noop;\n            _this._tapComplete = observerOrNext.complete || noop;\n        }\n        return _this;\n    }\n    TapSubscriber.prototype._next = function (value) {\n        try {\n            this._tapNext.call(this._context, value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(value);\n    };\n    TapSubscriber.prototype._error = function (err) {\n        try {\n            this._tapError.call(this._context, err);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.error(err);\n    };\n    TapSubscriber.prototype._complete = function () {\n        try {\n            this._tapComplete.call(this._context);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        return this.destination.complete();\n    };\n    return TapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=tap.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","export default function _has(prop, obj) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}","import _has from './_has.js';\n\nvar toString = Object.prototype.toString;\nvar _isArguments = /*#__PURE__*/function () {\n  return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {\n    return toString.call(x) === '[object Arguments]';\n  } : function _isArguments(x) {\n    return _has('callee', x);\n  };\n}();\n\nexport default _isArguments;","import _curry1 from './internal/_curry1.js';\nimport _has from './internal/_has.js';\nimport _isArguments from './internal/_isArguments.js';\n\n// cover IE < 9 keys issues\nvar hasEnumBug = ! /*#__PURE__*/{ toString: null }.propertyIsEnumerable('toString');\nvar nonEnumerableProps = ['constructor', 'valueOf', 'isPrototypeOf', 'toString', 'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n// Safari bug\nvar hasArgsEnumBug = /*#__PURE__*/function () {\n  'use strict';\n\n  return arguments.propertyIsEnumerable('length');\n}();\n\nvar contains = function contains(list, item) {\n  var idx = 0;\n  while (idx < list.length) {\n    if (list[idx] === item) {\n      return true;\n    }\n    idx += 1;\n  }\n  return false;\n};\n\n/**\n * Returns a list containing the names of all the enumerable own properties of\n * the supplied object.\n * Note that the order of the output array is not guaranteed to be consistent\n * across different JS platforms.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {k: v} -> [k]\n * @param {Object} obj The object to extract properties from\n * @return {Array} An array of the object's own properties.\n * @see R.keysIn, R.values\n * @example\n *\n *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\n */\nvar keys = typeof Object.keys === 'function' && !hasArgsEnumBug ? /*#__PURE__*/_curry1(function keys(obj) {\n  return Object(obj) !== obj ? [] : Object.keys(obj);\n}) : /*#__PURE__*/_curry1(function keys(obj) {\n  if (Object(obj) !== obj) {\n    return [];\n  }\n  var prop, nIdx;\n  var ks = [];\n  var checkArgsLength = hasArgsEnumBug && _isArguments(obj);\n  for (prop in obj) {\n    if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {\n      ks[ks.length] = prop;\n    }\n  }\n  if (hasEnumBug) {\n    nIdx = nonEnumerableProps.length - 1;\n    while (nIdx >= 0) {\n      prop = nonEnumerableProps[nIdx];\n      if (_has(prop, obj) && !contains(ks, prop)) {\n        ks[ks.length] = prop;\n      }\n      nIdx -= 1;\n    }\n  }\n  return ks;\n});\nexport default keys;","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { NEVER, Observable, OperatorFunction, pipe } from \"rxjs\"\nimport { switchMap } from \"rxjs/operators\"\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Convert a collection to an array\n *\n * @template T - Element type\n *\n * @param collection - Collection or node list\n *\n * @return Array of elements\n */\nexport function toArray<\n  T extends HTMLElement\n>(collection: HTMLCollection | NodeListOf<T>): T[] {\n  return Array.from(collection) as T[]\n}\n\n/* ----------------------------------------------------------------------------\n * Operators\n * ------------------------------------------------------------------------- */\n\n/**\n * Switch to another observable, if toggle is active\n *\n * @template T - Observable value type\n *\n * @param project - Project function\n *\n * @return Observable, if toggle is active\n */\nexport function toggle<T>(\n  project: () => Observable<T>\n): OperatorFunction<boolean, T> {\n  return pipe(\n    switchMap(active => active ? project() : NEVER)\n  )\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { OperatorFunction, pipe } from \"rxjs\"\nimport { filter, map } from \"rxjs/operators\"\n\nimport { toArray } from \"../../utilities\"\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Retrieve an element matching the query selector\n *\n * @template T - Element type\n *\n * @param selector - Query selector\n * @param node - Node of reference\n *\n * @return Element\n */\nexport function getElement<T extends HTMLElement>(\n  selector: string, node: ParentNode = document\n): T | undefined {\n  return node.querySelector<T>(selector) || undefined\n}\n\n/**\n * Retrieve all elements matching the query selector\n *\n * @template T - Element type\n *\n * @param selector - Query selector\n * @param node - Node of reference\n *\n * @return Elements\n */\nexport function getElements<T extends HTMLElement>(\n  selector: string, node: ParentNode = document\n): T[] {\n  return toArray(node.querySelectorAll<T>(selector))\n}\n\n/* ----------------------------------------------------------------------------\n * Operators\n * ------------------------------------------------------------------------- */\n\n/**\n * Retrieve an element matching the query selector\n *\n * @template T - Element type\n *\n * @param node - Node of reference\n *\n * @return Operator function\n */\nexport function withElement<T extends HTMLElement>(\n  node: ParentNode = document\n): OperatorFunction<string, T> {\n  return pipe(\n    map(selector => getElement<T>(selector, node)!),\n    filter<T>(Boolean)\n  )\n}\n\n/**\n * Retrieve all elements matching the query selector\n *\n * @template T - Element type\n *\n * @param node - Node of reference\n *\n * @return Operator function\n */\nexport function withElements<T extends HTMLElement>(\n  node: ParentNode = document\n): OperatorFunction<string, T[]> {\n  return pipe(\n    map(selector => getElements<T>(selector, node))\n  )\n}\n","/** PURE_IMPORTS_START _of,_operators_concatAll PURE_IMPORTS_END */\nimport { of } from './of';\nimport { concatAll } from '../operators/concatAll';\nexport function concat() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    return concatAll()(of.apply(void 0, observables));\n}\n//# sourceMappingURL=concat.js.map\n","/** PURE_IMPORTS_START _mergeAll PURE_IMPORTS_END */\nimport { mergeAll } from './mergeAll';\nexport function concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map\n","/** PURE_IMPORTS_START _observable_concat,_util_isScheduler PURE_IMPORTS_END */\nimport { concat } from '../observable/concat';\nimport { isScheduler } from '../util/isScheduler';\nexport function startWith() {\n    var array = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        array[_i] = arguments[_i];\n    }\n    var scheduler = array[array.length - 1];\n    if (isScheduler(scheduler)) {\n        array.pop();\n        return function (source) { return concat(array, source, scheduler); };\n    }\n    else {\n        return function (source) { return concat(array, source); };\n    }\n}\n//# sourceMappingURL=startWith.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator(source));\n    };\n}\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=refCount.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Observable,_Subscriber,_Subscription,_operators_refCount PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SubjectSubscriber } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nvar ConnectableObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._refCount = 0;\n        _this._isComplete = false;\n        return _this;\n    }\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return higherOrderRefCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nexport { ConnectableObservable };\nexport var connectableObservableDescriptor = /*@__PURE__*/ (function () {\n    var connectableProto = ConnectableObservable.prototype;\n    return {\n        operator: { value: null },\n        _refCount: { value: 0, writable: true },\n        _subject: { value: null, writable: true },\n        _connection: { value: null, writable: true },\n        _subscribe: { value: connectableProto._subscribe },\n        _isComplete: { value: connectableProto._isComplete, writable: true },\n        getSubject: { value: connectableProto.getSubject },\n        connect: { value: connectableProto.connect },\n        refCount: { value: connectableProto.refCount }\n    };\n})();\nvar ConnectableSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableSubscriber, _super);\n    function ConnectableSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    ConnectableSubscriber.prototype._error = function (err) {\n        this._unsubscribe();\n        _super.prototype._error.call(this, err);\n    };\n    ConnectableSubscriber.prototype._complete = function () {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        _super.prototype._complete.call(this);\n    };\n    ConnectableSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            var connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    };\n    return ConnectableSubscriber;\n}(SubjectSubscriber));\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=ConnectableObservable.js.map\n","/** PURE_IMPORTS_START _observable_ConnectableObservable PURE_IMPORTS_END */\nimport { connectableObservableDescriptor } from '../observable/ConnectableObservable';\nexport function multicast(subjectOrSubjectFactory, selector) {\n    return function multicastOperatorFunction(source) {\n        var subjectFactory;\n        if (typeof subjectOrSubjectFactory === 'function') {\n            subjectFactory = subjectOrSubjectFactory;\n        }\n        else {\n            subjectFactory = function subjectFactory() {\n                return subjectOrSubjectFactory;\n            };\n        }\n        if (typeof selector === 'function') {\n            return source.lift(new MulticastOperator(subjectFactory, selector));\n        }\n        var connectable = Object.create(source, connectableObservableDescriptor);\n        connectable.source = source;\n        connectable.subjectFactory = subjectFactory;\n        return connectable;\n    };\n}\nvar MulticastOperator = /*@__PURE__*/ (function () {\n    function MulticastOperator(subjectFactory, selector) {\n        this.subjectFactory = subjectFactory;\n        this.selector = selector;\n    }\n    MulticastOperator.prototype.call = function (subscriber, source) {\n        var selector = this.selector;\n        var subject = this.subjectFactory();\n        var subscription = selector(subject).subscribe(subscriber);\n        subscription.add(source.subscribe(subject));\n        return subscription;\n    };\n    return MulticastOperator;\n}());\nexport { MulticastOperator };\n//# sourceMappingURL=multicast.js.map\n","/** PURE_IMPORTS_START _multicast,_refCount,_Subject PURE_IMPORTS_END */\nimport { multicast } from './multicast';\nimport { refCount } from './refCount';\nimport { Subject } from '../Subject';\nfunction shareSubjectFactory() {\n    return new Subject();\n}\nexport function share() {\n    return function (source) { return refCount()(multicast(shareSubjectFactory)(source)); };\n}\n//# sourceMappingURL=share.js.map\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { Observable, Subject, fromEvent } from \"rxjs\"\nimport { filter, map, share, startWith } from \"rxjs/operators\"\n\n/* ----------------------------------------------------------------------------\n * Data\n * ------------------------------------------------------------------------- */\n\n/**\n * Observable for window hash change events\n */\nconst hashchange$ = fromEvent<HashChangeEvent>(window, \"hashchange\")\n\n/**\n * Observable for window pop state events\n */\nconst popstate$ = fromEvent<PopStateEvent>(window, \"popstate\")\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Create a subject to watch or alter the location\n *\n * @return Location subject\n */\nexport function watchLocation(): Subject<string> {\n  const location$ = new Subject<string>()\n  popstate$\n    .pipe(\n      map(() => location.href)\n    )\n      .subscribe(location$)\n\n  /* Return subject */\n  return location$\n}\n\n/**\n * Create an observable to watch the location hash\n *\n * @return Location hash observable\n */\nexport function watchLocationHash(): Observable<string> {\n  return hashchange$\n    .pipe(\n      map(() => location.hash),\n      startWith(location.hash),\n      filter(hash => hash.length > 0),\n      share()\n    )\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { Observable, fromEventPattern } from \"rxjs\"\nimport { shareReplay, startWith } from \"rxjs/operators\"\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Create an observable to watch a media query\n *\n * @param query - Media query\n *\n * @return Media observable\n */\nexport function watchMedia(query: string): Observable<boolean> {\n  const media = window.matchMedia(query)\n  return fromEventPattern<boolean>(next =>\n    media.addListener(() => next(media.matches))\n  )\n    .pipe(\n      startWith(media.matches),\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nexport function fromEventPattern(addHandler, removeHandler, resultSelector) {\n    if (resultSelector) {\n        return fromEventPattern(addHandler, removeHandler).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        var handler = function () {\n            var e = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                e[_i] = arguments[_i];\n            }\n            return subscriber.next(e.length === 1 ? e[0] : e);\n        };\n        var retValue;\n        try {\n            retValue = addHandler(handler);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        if (!isFunction(removeHandler)) {\n            return undefined;\n        }\n        return function () { return removeHandler(handler, retValue); };\n    });\n}\n//# sourceMappingURL=fromEventPattern.js.map\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { Observable, fromEvent, merge } from \"rxjs\"\nimport { map, shareReplay, startWith } from \"rxjs/operators\"\n\n/* ----------------------------------------------------------------------------\n * Data\n * ------------------------------------------------------------------------- */\n\n/**\n * Observable for window scroll events\n */\nconst scroll$ = fromEvent<UIEvent>(window, \"scroll\")\n\n/**\n * Observable for window resize events\n */\nconst resize$ = fromEvent<UIEvent>(window, \"resize\")\n\n/* ----------------------------------------------------------------------------\n * Types\n * ------------------------------------------------------------------------- */\n\n/**\n * Viewport offset\n */\nexport interface ViewportOffset {\n  x: number                            /* Horizontal offset */\n  y: number                            /* Vertical offset */\n}\n\n/**\n * Viewport size\n */\nexport interface ViewportSize {\n  width: number                        /* Viewport width */\n  height: number                       /* Viewport height */\n}\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Retrieve the viewport offset\n *\n * @return Viewport offset\n */\nexport function getViewportOffset(): ViewportOffset {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  }\n}\n\n/**\n * Retrieve the viewport size\n *\n * @return Viewport size\n */\nexport function getViewportSize(): ViewportSize {\n  return {\n    width:  window.innerWidth,\n    height: window.innerHeight\n  }\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Create an observable to watch the viewport offset\n *\n * @return Viewport offset observable\n */\nexport function watchViewportOffset(): Observable<ViewportOffset> {\n  return merge(scroll$, resize$)\n    .pipe(\n      map(getViewportOffset),\n      startWith(getViewportOffset()),\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n\n/**\n * Create an observable to watch the viewport size\n *\n * @return Viewport size observable\n */\nexport function watchViewportSize(): Observable<ViewportSize> {\n  return resize$\n    .pipe(\n      map(getViewportSize),\n      startWith(getViewportSize()),\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { keys } from \"ramda\"\nimport {\n  MonoTypeOperatorFunction,\n  NEVER,\n  Observable,\n  OperatorFunction,\n  of,\n  pipe\n} from \"rxjs\"\nimport { scan, shareReplay, switchMap } from \"rxjs/operators\"\n\nimport { getElement } from \"../../ui\"\n\n/* ----------------------------------------------------------------------------\n * Types\n * ------------------------------------------------------------------------- */\n\n/**\n * Components\n */\nexport type Component =\n  | \"header\"                           /* Header */\n  | \"title\"                            /* Header title */\n  | \"search\"                           /* Search */\n  | \"query\"                            /* Search input */\n  | \"reset\"                            /* Search reset */\n  | \"result\"                           /* Search results */\n  | \"container\"                        /* Container */\n  | \"main\"                             /* Main area */\n  | \"hero\"                             /* Hero */\n  | \"tabs\"                             /* Tabs */\n  | \"navigation\"                       /* Navigation */\n  | \"toc\"                              /* Table of contents */\n\n/**\n * Component map\n */\nexport type ComponentMap = {\n  [P in Component]?: HTMLElement\n}\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Retrieve the component to element mapping\n *\n * The document must be passed as a parameter to support retrieving elements\n * from the document object returned through asynchronous loading.\n *\n * @param document - Document of reference\n *\n * @return Component map observable\n */\nexport function watchComponentMap(\n  document: Document\n): Observable<ComponentMap> {\n\n  /* Build component map */\n  const map$ = of([\n    \"header\",                          /* Header */\n    \"title\",                           /* Header title */\n    \"search\",                          /* Search */\n    \"query\",                           /* Search input */\n    \"reset\",                           /* Search reset */\n    \"result\",                          /* Search results */\n    \"container\",                       /* Container */\n    \"main\",                            /* Main area */\n    \"hero\",                            /* Hero */\n    \"tabs\",                            /* Tabs */\n    \"navigation\",                      /* Navigation */\n    \"toc\"                              /* Table of contents */\n  ].reduce<ComponentMap>((map, name) => {\n    const el = getElement(`[data-md-component=${name}]`, document)\n    return {\n      ...map,\n      ...typeof el !== \"undefined\" ? { [name]: el } : {}\n    }\n  }, {}))\n\n  /* Return component map as hot observable */\n  return map$\n    .pipe(\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Paint component map from source observable\n *\n * This operator function will swap the components in the previous component\n * map with the new components identified by the given names and rebind all\n * remaining components, as they may be children of swapped components.\n *\n * @param names - Components to paint\n *\n * @return Operator function\n */\nexport function paintComponentMap(\n  names: Component[] = [\"title\", \"container\"]\n): MonoTypeOperatorFunction<ComponentMap> {\n  return pipe(\n    scan<ComponentMap>((prev, next) => {\n      for (const name of keys(prev)) {\n\n        /* Swap component */\n        if (names.includes(name)) {\n          if (name in prev && typeof prev[name] !== \"undefined\") {\n            prev[name]!.replaceWith(next[name]!)\n            prev[name] = next[name]\n          }\n\n        /* Bind component */\n        } else {\n          prev[name] = getElement(`[data-md-component=${name}]`)\n        }\n      }\n      return prev\n    })\n  )\n}\n\n/**\n * Pluck a component from the component map\n *\n * @template T - Element type\n *\n * @param name - Component\n *\n * @return Operator function\n */\nexport function pluckComponent(\n  name: Component\n): OperatorFunction<ComponentMap, HTMLElement> {\n  return pipe(\n    switchMap(map => {\n      return typeof map[name] !== \"undefined\"\n        ? of(map[name]!)\n        : NEVER\n    })\n  )\n}\n","import _curry1 from './internal/_curry1.js';\nimport _isString from './internal/_isString.js';\n\n/**\n * Returns a new list or string with the elements or characters in reverse\n * order.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig [a] -> [a]\n * @sig String -> String\n * @param {Array|String} list\n * @return {Array|String}\n * @example\n *\n *      R.reverse([1, 2, 3]);  //=> [3, 2, 1]\n *      R.reverse([1, 2]);     //=> [2, 1]\n *      R.reverse([1]);        //=> [1]\n *      R.reverse([]);         //=> []\n *\n *      R.reverse('abc');      //=> 'cba'\n *      R.reverse('ab');       //=> 'ba'\n *      R.reverse('a');        //=> 'a'\n *      R.reverse('');         //=> ''\n */\nvar reverse = /*#__PURE__*/_curry1(function reverse(list) {\n  return _isString(list) ? list.split('').reverse().join('') : Array.prototype.slice.call(list, 0).reverse();\n});\nexport default reverse;","export default function _isString(x) {\n  return Object.prototype.toString.call(x) === '[object String]';\n}","export default function _arrayFromIterator(iter) {\n  var list = [];\n  var next;\n  while (!(next = iter.next()).done) {\n    list.push(next.value);\n  }\n  return list;\n}","export default function _includesWith(pred, x, list) {\n  var idx = 0;\n  var len = list.length;\n\n  while (idx < len) {\n    if (pred(x, list[idx])) {\n      return true;\n    }\n    idx += 1;\n  }\n  return false;\n}","// Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\nfunction _objectIs(a, b) {\n  // SameValue algorithm\n  if (a === b) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    return a !== 0 || 1 / a === 1 / b;\n  } else {\n    // Step 6.a: NaN == NaN\n    return a !== a && b !== b;\n  }\n}\n\nexport default typeof Object.is === 'function' ? Object.is : _objectIs;","import _curry1 from './internal/_curry1.js';\n\n/**\n * Gives a single-word string description of the (native) type of a value,\n * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\n * attempt to distinguish user Object types any further, reporting them all as\n * 'Object'.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Type\n * @sig (* -> {*}) -> String\n * @param {*} val The value to test\n * @return {String}\n * @example\n *\n *      R.type({}); //=> \"Object\"\n *      R.type(1); //=> \"Number\"\n *      R.type(false); //=> \"Boolean\"\n *      R.type('s'); //=> \"String\"\n *      R.type(null); //=> \"Null\"\n *      R.type([]); //=> \"Array\"\n *      R.type(/[A-z]/); //=> \"RegExp\"\n *      R.type(() => {}); //=> \"Function\"\n *      R.type(undefined); //=> \"Undefined\"\n */\nvar type = /*#__PURE__*/_curry1(function type(val) {\n  return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);\n});\nexport default type;","import _arrayFromIterator from './_arrayFromIterator.js';\nimport _includesWith from './_includesWith.js';\nimport _functionName from './_functionName.js';\nimport _has from './_has.js';\nimport _objectIs from './_objectIs.js';\nimport keys from '../keys.js';\nimport type from '../type.js';\n\n/**\n * private _uniqContentEquals function.\n * That function is checking equality of 2 iterator contents with 2 assumptions\n * - iterators lengths are the same\n * - iterators values are unique\n *\n * false-positive result will be returned for comparision of, e.g.\n * - [1,2,3] and [1,2,3,4]\n * - [1,1,1] and [1,2,3]\n * */\n\nfunction _uniqContentEquals(aIterator, bIterator, stackA, stackB) {\n  var a = _arrayFromIterator(aIterator);\n  var b = _arrayFromIterator(bIterator);\n\n  function eq(_a, _b) {\n    return _equals(_a, _b, stackA.slice(), stackB.slice());\n  }\n\n  // if *a* array contains any element that is not included in *b*\n  return !_includesWith(function (b, aItem) {\n    return !_includesWith(eq, aItem, b);\n  }, b, a);\n}\n\nexport default function _equals(a, b, stackA, stackB) {\n  if (_objectIs(a, b)) {\n    return true;\n  }\n\n  var typeA = type(a);\n\n  if (typeA !== type(b)) {\n    return false;\n  }\n\n  if (a == null || b == null) {\n    return false;\n  }\n\n  if (typeof a['fantasy-land/equals'] === 'function' || typeof b['fantasy-land/equals'] === 'function') {\n    return typeof a['fantasy-land/equals'] === 'function' && a['fantasy-land/equals'](b) && typeof b['fantasy-land/equals'] === 'function' && b['fantasy-land/equals'](a);\n  }\n\n  if (typeof a.equals === 'function' || typeof b.equals === 'function') {\n    return typeof a.equals === 'function' && a.equals(b) && typeof b.equals === 'function' && b.equals(a);\n  }\n\n  switch (typeA) {\n    case 'Arguments':\n    case 'Array':\n    case 'Object':\n      if (typeof a.constructor === 'function' && _functionName(a.constructor) === 'Promise') {\n        return a === b;\n      }\n      break;\n    case 'Boolean':\n    case 'Number':\n    case 'String':\n      if (!(typeof a === typeof b && _objectIs(a.valueOf(), b.valueOf()))) {\n        return false;\n      }\n      break;\n    case 'Date':\n      if (!_objectIs(a.valueOf(), b.valueOf())) {\n        return false;\n      }\n      break;\n    case 'Error':\n      return a.name === b.name && a.message === b.message;\n    case 'RegExp':\n      if (!(a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline && a.sticky === b.sticky && a.unicode === b.unicode)) {\n        return false;\n      }\n      break;\n  }\n\n  var idx = stackA.length - 1;\n  while (idx >= 0) {\n    if (stackA[idx] === a) {\n      return stackB[idx] === b;\n    }\n    idx -= 1;\n  }\n\n  switch (typeA) {\n    case 'Map':\n      if (a.size !== b.size) {\n        return false;\n      }\n\n      return _uniqContentEquals(a.entries(), b.entries(), stackA.concat([a]), stackB.concat([b]));\n    case 'Set':\n      if (a.size !== b.size) {\n        return false;\n      }\n\n      return _uniqContentEquals(a.values(), b.values(), stackA.concat([a]), stackB.concat([b]));\n    case 'Arguments':\n    case 'Array':\n    case 'Object':\n    case 'Boolean':\n    case 'Number':\n    case 'String':\n    case 'Date':\n    case 'Error':\n    case 'RegExp':\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float32Array':\n    case 'Float64Array':\n    case 'ArrayBuffer':\n      break;\n    default:\n      // Values of other types are only equal if identical.\n      return false;\n  }\n\n  var keysA = keys(a);\n  if (keysA.length !== keys(b).length) {\n    return false;\n  }\n\n  var extendedStackA = stackA.concat([a]);\n  var extendedStackB = stackB.concat([b]);\n\n  idx = keysA.length - 1;\n  while (idx >= 0) {\n    var key = keysA[idx];\n    if (!(_has(key, b) && _equals(b[key], a[key], extendedStackA, extendedStackB))) {\n      return false;\n    }\n    idx -= 1;\n  }\n  return true;\n}","export default function _functionName(f) {\n  // String(x => x) evaluates to \"x => x\", so the pattern may not match.\n  var match = String(f).match(/^function (\\w*)/);\n  return match == null ? '' : match[1];\n}","import _curry2 from './internal/_curry2.js';\nimport _equals from './internal/_equals.js';\n\n/**\n * Returns `true` if its arguments are equivalent, `false` otherwise. Handles\n * cyclical data structures.\n *\n * Dispatches symmetrically to the `equals` methods of both arguments, if\n * present.\n *\n * @func\n * @memberOf R\n * @since v0.15.0\n * @category Relation\n * @sig a -> b -> Boolean\n * @param {*} a\n * @param {*} b\n * @return {Boolean}\n * @example\n *\n *      R.equals(1, 1); //=> true\n *      R.equals(1, '1'); //=> false\n *      R.equals([1, 2, 3], [1, 2, 3]); //=> true\n *\n *      const a = {}; a.v = a;\n *      const b = {}; b.v = b;\n *      R.equals(a, b); //=> true\n */\nvar equals = /*#__PURE__*/_curry2(function equals(a, b) {\n  return _equals(a, b, [], []);\n});\nexport default equals;","import _indexOf from './_indexOf.js';\n\nexport default function _includes(a, list) {\n  return _indexOf(list, a, 0) >= 0;\n}","import equals from '../equals.js';\n\nexport default function _indexOf(list, a, idx) {\n  var inf, item;\n  // Array.prototype.indexOf doesn't exist below IE9\n  if (typeof list.indexOf === 'function') {\n    switch (typeof a) {\n      case 'number':\n        if (a === 0) {\n          // manually crawl the list to distinguish between +0 and -0\n          inf = 1 / a;\n          while (idx < list.length) {\n            item = list[idx];\n            if (item === 0 && 1 / item === inf) {\n              return idx;\n            }\n            idx += 1;\n          }\n          return -1;\n        } else if (a !== a) {\n          // NaN\n          while (idx < list.length) {\n            item = list[idx];\n            if (typeof item === 'number' && item !== item) {\n              return idx;\n            }\n            idx += 1;\n          }\n          return -1;\n        }\n        // non-zero numbers can utilise Set\n        return list.indexOf(a, idx);\n\n      // all these types can utilise Set\n      case 'string':\n      case 'boolean':\n      case 'function':\n      case 'undefined':\n        return list.indexOf(a, idx);\n\n      case 'object':\n        if (a === null) {\n          // null can utilise Set\n          return list.indexOf(a, idx);\n        }\n    }\n  }\n  // anything else not covered above, defer to R.equals\n  while (idx < list.length) {\n    if (equals(list[idx], a)) {\n      return idx;\n    }\n    idx += 1;\n  }\n  return -1;\n}","import _includes from './_includes.js';\n\nvar _Set = /*#__PURE__*/function () {\n  function _Set() {\n    /* globals Set */\n    this._nativeSet = typeof Set === 'function' ? new Set() : null;\n    this._items = {};\n  }\n\n  // until we figure out why jsdoc chokes on this\n  // @param item The item to add to the Set\n  // @returns {boolean} true if the item did not exist prior, otherwise false\n  //\n  _Set.prototype.add = function (item) {\n    return !hasOrAdd(item, true, this);\n  };\n\n  //\n  // @param item The item to check for existence in the Set\n  // @returns {boolean} true if the item exists in the Set, otherwise false\n  //\n  _Set.prototype.has = function (item) {\n    return hasOrAdd(item, false, this);\n  };\n\n  //\n  // Combines the logic for checking whether an item is a member of the set and\n  // for adding a new item to the set.\n  //\n  // @param item       The item to check or add to the Set instance.\n  // @param shouldAdd  If true, the item will be added to the set if it doesn't\n  //                   already exist.\n  // @param set        The set instance to check or add to.\n  // @return {boolean} true if the item already existed, otherwise false.\n  //\n  return _Set;\n}();\n\nfunction hasOrAdd(item, shouldAdd, set) {\n  var type = typeof item;\n  var prevSize, newSize;\n  switch (type) {\n    case 'string':\n    case 'number':\n      // distinguish between +0 and -0\n      if (item === 0 && 1 / item === -Infinity) {\n        if (set._items['-0']) {\n          return true;\n        } else {\n          if (shouldAdd) {\n            set._items['-0'] = true;\n          }\n          return false;\n        }\n      }\n      // these types can all utilise the native Set\n      if (set._nativeSet !== null) {\n        if (shouldAdd) {\n          prevSize = set._nativeSet.size;\n          set._nativeSet.add(item);\n          newSize = set._nativeSet.size;\n          return newSize === prevSize;\n        } else {\n          return set._nativeSet.has(item);\n        }\n      } else {\n        if (!(type in set._items)) {\n          if (shouldAdd) {\n            set._items[type] = {};\n            set._items[type][item] = true;\n          }\n          return false;\n        } else if (item in set._items[type]) {\n          return true;\n        } else {\n          if (shouldAdd) {\n            set._items[type][item] = true;\n          }\n          return false;\n        }\n      }\n\n    case 'boolean':\n      // set._items['boolean'] holds a two element array\n      // representing [ falseExists, trueExists ]\n      if (type in set._items) {\n        var bIdx = item ? 1 : 0;\n        if (set._items[type][bIdx]) {\n          return true;\n        } else {\n          if (shouldAdd) {\n            set._items[type][bIdx] = true;\n          }\n          return false;\n        }\n      } else {\n        if (shouldAdd) {\n          set._items[type] = item ? [false, true] : [true, false];\n        }\n        return false;\n      }\n\n    case 'function':\n      // compare functions for reference equality\n      if (set._nativeSet !== null) {\n        if (shouldAdd) {\n          prevSize = set._nativeSet.size;\n          set._nativeSet.add(item);\n          newSize = set._nativeSet.size;\n          return newSize === prevSize;\n        } else {\n          return set._nativeSet.has(item);\n        }\n      } else {\n        if (!(type in set._items)) {\n          if (shouldAdd) {\n            set._items[type] = [item];\n          }\n          return false;\n        }\n        if (!_includes(item, set._items[type])) {\n          if (shouldAdd) {\n            set._items[type].push(item);\n          }\n          return false;\n        }\n        return true;\n      }\n\n    case 'undefined':\n      if (set._items[type]) {\n        return true;\n      } else {\n        if (shouldAdd) {\n          set._items[type] = true;\n        }\n        return false;\n      }\n\n    case 'object':\n      if (item === null) {\n        if (!set._items['null']) {\n          if (shouldAdd) {\n            set._items['null'] = true;\n          }\n          return false;\n        }\n        return true;\n      }\n    /* falls through */\n    default:\n      // reduce the search size of heterogeneous sets by creating buckets\n      // for each type.\n      type = Object.prototype.toString.call(item);\n      if (!(type in set._items)) {\n        if (shouldAdd) {\n          set._items[type] = [item];\n        }\n        return false;\n      }\n      // scan through all previously applied items\n      if (!_includes(item, set._items[type])) {\n        if (shouldAdd) {\n          set._items[type].push(item);\n        }\n        return false;\n      }\n      return true;\n  }\n}\n\n// A simple Set type that honours R.equals semantics\nexport default _Set;","import _curry2 from './internal/_curry2.js';\nimport _Set from './internal/_Set.js';\n\n/**\n * Finds the set (i.e. no duplicates) of all elements in the first list not\n * contained in the second list. Objects and Arrays are compared in terms of\n * value equality, not reference equality.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Relation\n * @sig [*] -> [*] -> [*]\n * @param {Array} list1 The first list.\n * @param {Array} list2 The second list.\n * @return {Array} The elements in `list1` that are not in `list2`.\n * @see R.differenceWith, R.symmetricDifference, R.symmetricDifferenceWith, R.without\n * @example\n *\n *      R.difference([1,2,3,4], [7,6,5,4,3]); //=> [1,2]\n *      R.difference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5]\n *      R.difference([{a: 1}, {b: 2}], [{a: 1}, {c: 3}]) //=> [{b: 2}]\n */\nvar difference = /*#__PURE__*/_curry2(function difference(first, second) {\n  var out = [];\n  var idx = 0;\n  var firstLen = first.length;\n  var secondLen = second.length;\n  var toFilterOut = new _Set();\n\n  for (var i = 0; i < secondLen; i += 1) {\n    toFilterOut.add(second[i]);\n  }\n\n  while (idx < firstLen) {\n    if (toFilterOut.add(first[idx])) {\n      out[out.length] = first[idx];\n    }\n    idx += 1;\n  }\n  return out;\n});\nexport default difference;","/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { fromArray } from './fromArray';\nvar NONE = {};\nexport function combineLatest() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = null;\n    var scheduler = null;\n    if (isScheduler(observables[observables.length - 1])) {\n        scheduler = observables.pop();\n    }\n    if (typeof observables[observables.length - 1] === 'function') {\n        resultSelector = observables.pop();\n    }\n    if (observables.length === 1 && isArray(observables[0])) {\n        observables = observables[0];\n    }\n    return fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nvar CombineLatestOperator = /*@__PURE__*/ (function () {\n    function CombineLatestOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    CombineLatestOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n    };\n    return CombineLatestOperator;\n}());\nexport { CombineLatestOperator };\nvar CombineLatestSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\nexport { CombineLatestSubscriber };\n//# sourceMappingURL=combineLatest.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function distinctUntilChanged(compare, keySelector) {\n    return function (source) { return source.lift(new DistinctUntilChangedOperator(compare, keySelector)); };\n}\nvar DistinctUntilChangedOperator = /*@__PURE__*/ (function () {\n    function DistinctUntilChangedOperator(compare, keySelector) {\n        this.compare = compare;\n        this.keySelector = keySelector;\n    }\n    DistinctUntilChangedOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n    };\n    return DistinctUntilChangedOperator;\n}());\nvar DistinctUntilChangedSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            var keySelector = this.keySelector;\n            key = keySelector ? keySelector(value) : value;\n        }\n        catch (err) {\n            return this.destination.error(err);\n        }\n        var result = false;\n        if (this.hasKey) {\n            try {\n                var compare = this.compare;\n                result = compare(this.key, key);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (!result) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber));\n//# sourceMappingURL=distinctUntilChanged.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nexport function finalize(callback) {\n    return function (source) { return source.lift(new FinallyOperator(callback)); };\n}\nvar FinallyOperator = /*@__PURE__*/ (function () {\n    function FinallyOperator(callback) {\n        this.callback = callback;\n    }\n    FinallyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FinallySubscriber(subscriber, this.callback));\n    };\n    return FinallyOperator;\n}());\nvar FinallySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n//# sourceMappingURL=finalize.js.map\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Set anchor blur\n *\n * @param el - Anchor element\n * @param value - Whether the anchor is blurred\n */\nexport function setAnchorBlur(\n  el: HTMLElement, value: boolean\n): void {\n  el.setAttribute(\"data-md-state\", value ? \"blur\" : \"\")\n}\n\n/**\n * Reset anchor blur\n *\n * @param el - Anchor element\n */\nexport function resetAnchorBlur(\n  el: HTMLElement\n): void {\n  el.removeAttribute(\"data-md-state\")\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Set anchor active\n *\n * @param el - Anchor element\n * @param value - Whether the anchor is active\n */\nexport function setAnchorActive(\n  el: HTMLElement, value: boolean\n): void {\n  el.classList.toggle(\"md-nav__link--active\", value)\n}\n\n/**\n * Reset anchor active\n *\n * @param el - Anchor element\n */\nexport function resetAnchorActive(\n  el: HTMLElement\n): void {\n  el.classList.remove(\"md-nav__link--active\")\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { MonoTypeOperatorFunction, Observable, of, pipe } from \"rxjs\"\nimport {\n  distinctUntilKeyChanged,\n  finalize,\n  shareReplay,\n  tap\n} from \"rxjs/operators\"\n\nimport { Main } from \"../../main\"\nimport {\n  resetHeaderShadow,\n  setHeaderShadow\n} from \"../element\"\n\n/* ----------------------------------------------------------------------------\n * Types\n * ------------------------------------------------------------------------- */\n\n/**\n * Header\n */\nexport interface Header {\n  sticky: boolean                      /* Header stickyness */\n  height: number                       /* Header visible height */\n}\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Create an observable to watch the header\n *\n * The header is wrapped in an observable to pave the way for auto-hiding or\n * other dynamic behaviors that may be implemented later on.\n *\n * @param el - Header element\n *\n * @return Header observable\n */\nexport function watchHeader(\n  el: HTMLElement\n): Observable<Header> {\n  const sticky = getComputedStyle(el)\n    .getPropertyValue(\"position\") === \"fixed\"\n\n  /* Return header as hot observable */\n  return of({\n    sticky,\n    height: sticky ? el.offsetHeight : 0\n  })\n    .pipe(\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Paint header shadow from source observable\n *\n * @param el - Header element\n *\n * @return Operator function\n */\nexport function paintHeaderShadow(\n  el: HTMLElement\n): MonoTypeOperatorFunction<Main> {\n  return pipe(\n    distinctUntilKeyChanged(\"active\"),\n    tap(({ active }) => {\n      setHeaderShadow(el, active)\n    }),\n    finalize(() => {\n      resetHeaderShadow(el)\n    })\n  )\n}\n","/** PURE_IMPORTS_START _distinctUntilChanged PURE_IMPORTS_END */\nimport { distinctUntilChanged } from './distinctUntilChanged';\nexport function distinctUntilKeyChanged(key, compare) {\n    return distinctUntilChanged(function (x, y) { return compare ? compare(x[key], y[key]) : x[key] === y[key]; });\n}\n//# sourceMappingURL=distinctUntilKeyChanged.js.map\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Set header shadow\n *\n * @param el - Header element\n * @param value - Whether the shadow is shown\n */\nexport function setHeaderShadow(\n  el: HTMLElement, value: boolean\n): void {\n  el.setAttribute(\"data-md-state\", value ? \"shadow\" : \"\")\n}\n\n/**\n * Reset header shadow\n *\n * @param el - Header element\n */\nexport function resetHeaderShadow(\n  el: HTMLElement\n): void {\n  el.removeAttribute(\"data-md-state\")\n}\n","/** PURE_IMPORTS_START _map PURE_IMPORTS_END */\nimport { map } from './map';\nexport function pluck() {\n    var properties = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        properties[_i] = arguments[_i];\n    }\n    var length = properties.length;\n    if (length === 0) {\n        throw new Error('list of properties cannot be empty.');\n    }\n    return function (source) { return map(plucker(properties, length))(source); };\n}\nfunction plucker(props, length) {\n    var mapper = function (x) {\n        var currentProp = x;\n        for (var i = 0; i < length; i++) {\n            var p = currentProp[props[i]];\n            if (typeof p !== 'undefined') {\n                currentProp = p;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return currentProp;\n    };\n    return mapper;\n}\n//# sourceMappingURL=pluck.js.map\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { Observable, of } from \"rxjs\"\nimport { shareReplay } from \"rxjs/operators\"\n\nimport { getElement, getElements } from \"../../ui\"\n\n/* ----------------------------------------------------------------------------\n * Types\n * ------------------------------------------------------------------------- */\n\n/**\n * Navigation index\n */\nexport type NavigationIndex = Map<HTMLInputElement, HTMLElement>\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Set navigation overflow scrolling\n *\n * @param el - Navigation element\n * @param active - Whether overflow scrolling is active\n */\nexport function setNavigationOverflowScrolling(\n  el: HTMLElement, active: boolean\n): void {\n  el.style.background = active ? \"yellow\" : \"\" // TODO: hack, temporary\n  el.style.webkitOverflowScrolling = active ? \"touch\" : \"\"\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Create an observable to index all navigation elements ---- TODO: implement as normal function!?\n *\n * @param el - Top-level navigation element\n *\n * @return Navigation index observable\n */\nexport function watchNavigationIndex(\n  el: HTMLElement\n): Observable<NavigationIndex> {\n  const list = getElements(\"nav\", el)\n\n  /* Build index to map inputs to navigation lists */\n  const index = new Map<HTMLInputElement, HTMLElement>()\n  for (const item of list) {\n    const label = getElement<HTMLLabelElement>(\"label\", item)!\n    if (typeof label !== \"undefined\") {\n      const input = getElement<HTMLInputElement>(`#${label.htmlFor}`)!\n      index.set(input, item)\n    }\n  }\n  // TODO: this probably never changes... does it!?\n\n  /* Return navigation index as hot observable */\n  return of(index)\n    .pipe(\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { equals } from \"ramda\"\nimport {\n  MonoTypeOperatorFunction,\n  Observable,\n  animationFrameScheduler,\n  combineLatest,\n  pipe\n} from \"rxjs\"\nimport {\n  distinctUntilChanged,\n  finalize,\n  map,\n  observeOn,\n  shareReplay,\n  tap\n} from \"rxjs/operators\"\n\nimport { ViewportOffset } from \"../../../ui\"\nimport { Main } from \"../../main\"\nimport {\n  resetSidebarHeight,\n  resetSidebarLock,\n  setSidebarHeight,\n  setSidebarLock\n} from \"../element\"\n\n/* ----------------------------------------------------------------------------\n * Types\n * ------------------------------------------------------------------------- */\n\n/**\n * Sidebar\n */\nexport interface Sidebar {\n  height: number                       /* Sidebar height */\n  lock: boolean                        /* Sidebar lock */\n}\n\n/* ----------------------------------------------------------------------------\n * Function types\n * ------------------------------------------------------------------------- */\n\n/**\n * Watch options\n */\ninterface WatchOptions {\n  offset$: Observable<ViewportOffset>  /* Viewport offset observable */\n  main$: Observable<Main>              /* Main area observable */\n}\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Create an observable to watch a sidebar\n *\n * @param el - Sidebar element\n * @param options - Options\n *\n * @return Sidebar observable\n */\nexport function watchSidebar(\n  el: HTMLElement, { offset$, main$ }: WatchOptions\n): Observable<Sidebar> {\n\n  /* Adjust for internal main area offset */\n  const adjust = parseFloat(\n    getComputedStyle(el.parentElement!)\n      .getPropertyValue(\"padding-top\")\n  )\n\n  /* Compute the sidebar's available height */\n  const height$ = combineLatest(offset$, main$)\n    .pipe(\n      map(([{ y }, { offset, height }]) => {\n        return height - adjust + Math.min(adjust, Math.max(0, y - offset))\n      })\n    )\n\n  /* Compute whether the sidebar should be locked */\n  const lock$ = combineLatest(offset$, main$)\n    .pipe(\n      map(([{ y }, { offset }]) => y >= offset + adjust)\n    )\n\n  /* Combine into single hot observable */\n  return combineLatest(height$, lock$)\n    .pipe(\n      map(([height, lock]) => ({ height, lock })),\n      distinctUntilChanged<Sidebar>(equals),\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Paint sidebar from source observable\n *\n * @param el - Sidebar element\n *\n * @return Operator function\n */\nexport function paintSidebar(\n  el: HTMLElement\n): MonoTypeOperatorFunction<Sidebar> {\n  return pipe(\n\n    /* Defer repaint to next animation frame */\n    observeOn(animationFrameScheduler),\n    tap(({ height, lock }) => {\n      setSidebarHeight(el, height)\n      setSidebarLock(el, lock)\n    }),\n\n    /* Reset on complete or error */\n    finalize(() => {\n      resetSidebarHeight(el)\n      resetSidebarLock(el)\n    })\n  )\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Set sidebar height\n *\n * @param el - Sidebar element\n * @param value - Sidebar height\n */\nexport function setSidebarHeight(\n  el: HTMLElement, value: number\n): void {\n  el.style.height = `${value}px`\n}\n\n/**\n * Reset sidebar height\n *\n * @param el - Sidebar element\n */\nexport function resetSidebarHeight(\n  el: HTMLElement\n): void {\n  el.style.height = \"\"\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Set sidebar lock\n *\n * @param el - Sidebar element\n * @param value - Whether the sidebar is locked\n */\nexport function setSidebarLock(\n  el: HTMLElement, value: boolean\n): void {\n  el.setAttribute(\"data-md-state\", value ? \"lock\" : \"\")\n}\n\n/**\n * Reset sidebar lock\n *\n * @param el - Sidebar element\n */\nexport function resetSidebarLock(\n  el: HTMLElement\n): void {\n  el.removeAttribute(\"data-md-state\")\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { findLast } from \"ramda\"\nimport {\n  NEVER,\n  animationFrameScheduler,\n  fromEvent,\n  merge,\n  of\n} from \"rxjs\"\nimport { AjaxRequest, ajax } from \"rxjs/ajax\"\nimport {\n  delay,\n  filter,\n  map,\n  mapTo,\n  observeOn,\n  scan,\n  shareReplay,\n  switchMap,\n  tap\n} from \"rxjs/operators\"\n\nimport \"./polyfill\"\n\nimport {\n  paintAnchorList,\n  paintComponentMap,\n  paintHeaderShadow,\n  paintSidebar,\n  pluckComponent,\n  setNavigationOverflowScrolling,\n  watchAnchorList,\n  watchComponentMap,\n  watchHeader,\n  watchMain,\n  watchNavigationIndex,\n  watchSidebar\n} from \"./component\"\nimport {\n  getElement,\n  getElements,\n  watchLocation,\n  watchLocationHash,\n  watchMedia,\n  watchViewportOffset,\n  watchViewportSize,\n  withElement\n} from \"./ui\"\nimport { toggle } from \"./utilities\"\n\n// ----------------------------------------------------------------------------\n// Disclaimer: this file is currently heavy WIP\n// ----------------------------------------------------------------------------\n\nconst offset$ = watchViewportOffset()\nconst size$   = watchViewportSize()\n\nconst aboveScreen$ = watchMedia(\"(min-width: 1220px)\")\nconst belowScreen$ = watchMedia(\"(max-width: 1219px)\")\n\nconst aboveTablet$ = watchMedia(\"(min-width: 960px)\")\nconst belowTablet$ = watchMedia(\"(max-width: 959px)\")\n\n// ----------------------------------------------------------------------------\n\n// modernizr for the poor\ndocument.documentElement.classList.remove(\"no-js\")\ndocument.documentElement.classList.add(\"js\")\n\n// ----------------------------------------------------------------------------\n\n// Observable that resolves with document when loaded\nconst init$ = fromEvent(document, \"DOMContentLoaded\")\n  .pipe(\n    mapTo(document),\n    shareReplay({ bufferSize: 1, refCount: true })\n  )\n\n// Location subject\nconst location$ = watchLocation()\n\n// Observable that resolves with document on XHR load\nconst reload$ = location$\n  .pipe(\n    switchMap(url => load(url))\n  )\n\n// Extract and (re-)paint components\nconst components$ = merge(init$, reload$)\n  .pipe(\n    switchMap(watchComponentMap),\n    paintComponentMap(),\n    shareReplay({ bufferSize: 1, refCount: true })\n  )\n\n// ----------------------------------------------------------------------------\n\nconst header$ = components$\n  .pipe(\n    pluckComponent(\"header\"),\n    switchMap(watchHeader)\n  )\n\nconst main$ = components$\n  .pipe(\n    pluckComponent(\"main\"),\n    switchMap(el => watchMain(el, { size$, offset$, header$ })),\n    shareReplay({ bufferSize: 1, refCount: true})\n  )\n\n// ----------------------------------------------------------------------------\n\n/* Component: sidebar with navigation */\ncomponents$\n  .pipe(\n    pluckComponent(\"navigation\"),\n    switchMap(el => aboveScreen$\n      .pipe(\n        toggle(() => watchSidebar(el, { offset$, main$ })\n          .pipe(\n            paintSidebar(el)\n          )\n        )\n      ))\n  )\n    .subscribe()\n\n/* Component: sidebar with table of contents (missing on 404 page) */\ncomponents$\n  .pipe(\n    pluckComponent(\"toc\"),\n    switchMap(el => aboveTablet$\n      .pipe(\n        toggle(() => watchSidebar(el, { offset$, main$ })\n          .pipe(\n            paintSidebar(el)\n          )\n        )\n      ))\n  )\n    .subscribe()\n\n/* Component: link blurring for table of contents */\ncomponents$\n  .pipe(\n    pluckComponent(\"toc\"),\n    map(el => getElements<HTMLAnchorElement>(\".md-nav__link\", el)),\n    switchMap(els => aboveTablet$\n      .pipe(\n        toggle(() => watchAnchorList(els, { size$, offset$, header$ })\n          .pipe(\n            paintAnchorList(els)\n          )\n        )\n      )\n    )\n  )\n    .subscribe()\n\n/* Component: header shadow toggle */\ncomponents$\n  .pipe(\n    pluckComponent(\"header\"),\n    switchMap(el => main$.pipe(\n      paintHeaderShadow(el)\n    ))\n  )\n    .subscribe()\n\n// ----------------------------------------------------------------------------\n// Refactor:\n// ----------------------------------------------------------------------------\n\n// Observable that catches all internal links without the necessity of rebinding\n// as events are bubbled up through the DOM.\ninit$\n  .pipe(\n    switchMap(({ body }) => fromEvent(body, \"click\")),\n    switchMap(ev => {\n\n      /* Walk up as long as we're not in a details tag */\n      let parent = ev.target as Node | undefined\n      while (parent && !(parent instanceof HTMLAnchorElement))\n        parent = parent.parentNode // TODO: fix errors...\n\n      if (parent) { // this one OR (!) one of\n        // its parents...\n        if (!/(:\\/\\/|^#[^\\/]+$)/.test(parent.getAttribute(\"href\")!)) {\n          ev.preventDefault()\n          console.log(\"> \", parent.href)\n\n          // Extract URL; push to state, then emit new URL\n          const href = parent.href\n          history.pushState({}, \"\", href) // move this somewhere else!???\n          return of(href)\n        }\n      }\n      return NEVER\n    }),\n    shareReplay({ bufferSize: 1, refCount: true })\n  )\n    .subscribe(location$)\n\n// ----------------------------------------------------------------------------\n\nconst nav2 = getElement(\"[data-md-component=navigation]\")!\nconst index$ = watchNavigationIndex(nav2) // TODO: maybe rename into setup!? merge with sidebar?\nbelowScreen$\n  .pipe(\n    toggle(() => index$\n      .pipe(\n        switchMap(index => merge(...[...index.keys()]\n          .map(input => fromEvent(input, \"change\"))\n        )\n          .pipe(\n            mapTo(index)\n          )\n        ),\n        map(index => getElement(\"ul\", index.get(\n          findLast(input => input.checked, [...index.keys()])!)\n        )!), // find the TOP MOST! <-- this is the actively displayed on mobile\n\n        // this is the paint job...\n\n        // dispatch action - TODO: document why this crap is even necessary\n        scan((prev, next) => {\n          if (prev)\n            setNavigationOverflowScrolling(prev, false) // TODO: resetOverflowScrolling ....\n          return next\n        }),\n        delay(250),\n        tap(next => {\n          setNavigationOverflowScrolling(next, true) // setNavigationScrollfix\n        })\n      )\n    )\n  )\n    .subscribe()\n\n// ----------------------------------------------------------------------------\n\nfunction isNavigationCollapsible(el: HTMLElement): boolean {\n  return el.getAttribute(\"data-md-component\") === \"collapsible\" // TODO: maybe better remove again\n}\n\naboveScreen$\n  .pipe(\n    toggle(() => index$\n      .pipe(\n        // map(index => )\n        // filter shit from index...\n        switchMap(index => [...index.keys()]\n          .filter(input => isNavigationCollapsible(index.get(input)!))\n          .map(input => {\n            const el = index.get(input)!\n            // this doesnt work...\n            el.setAttribute(\"data-md-height\", `${el.offsetHeight}`) // TODO: this is a hack\n            return input\n          })\n          .map(input => fromEvent(input, \"change\")\n            .pipe(\n              map(() => {\n                const el = index.get(input)!\n                let height = parseInt(el.getAttribute(\"data-md-height\")!, 10)\n                // always goes from data-md-height... wrong...\n                if (!input.checked) {\n                  el.style.maxHeight = `${height}px`\n\n                  /* Set target height */\n                  height = 0\n\n                } else {\n                  el.style.maxHeight = \"initial\" // 100%!?\n                  el.style.transitionDuration = \"initial\"\n\n                  /* Retrieve target height */\n                  height = el.offsetHeight\n                  console.log(\"expand to height\")\n\n                  /* Reset state and set start height */\n                  // el.removeAttribute(\"data-md-state\")\n                  el.style.maxHeight = \"0px\"\n                }\n\n                /* Force style recalculation */\n                el.offsetHeight // tslint:disable-line\n                el.style.transitionDuration = \"\"\n                return height\n              }), // max height is set... just read it.\n              observeOn(animationFrameScheduler),\n              tap(height => {\n                const el = index.get(input)!\n                // el.setAttribute(\"data-md-state\", \"animate\")\n                el.style.maxHeight = `${height}px`\n                console.log(\"setting shit...\")\n\n                el.setAttribute(\"data-md-height\", `${height}`)\n              }),\n              delay(250),\n              tap(() => {\n                const el = index.get(input)!\n                console.log(\"DONE\")\n                // el.removeAttribute(\"data-md-state\")\n                el.style.maxHeight = \"\"\n              })\n            )\n              .subscribe() // merge shit and return it...\n          )\n        )\n      )\n    )\n  )\n    .subscribe()\n\n// ----------------------------------------------------------------------------\n\n/* Open details after anchor jump */\nconst hash$ = watchLocationHash()\nhash$\n  .pipe(\n    withElement(), // TODO: somehow ugly... not so nice and cool\n    tap(el => {\n      let parent = el.parentNode\n      while (parent && !(parent instanceof HTMLDetailsElement)) // TODO: put this into a FUNCTION!\n        parent = parent.parentNode\n\n      /* If there's a details tag, open it */\n      if (parent && !parent.open) {\n        parent.open = true\n\n        /* Hack: force reload for repositioning */ // TODO. what happens here!?\n        const hash = location.hash\n        location.hash = \" \"\n        location.hash = hash // tslint:disable-line\n        // TODO: setLocationHash() + forceLocationHashChange\n      }\n    })\n  )\n    .subscribe()\n\n// ----------------------------------------------------------------------------\n\n// setupAnchorToggle?\nconst drawerToggle = getElement<HTMLInputElement>(\"[data-md-toggle=drawer]\")!\nconst searchToggle = getElement<HTMLInputElement>(\"[data-md-toggle=search]\")!\n\n/* Listener: close drawer when anchor links are clicked */\nhash$\n  .pipe(\n    tap(() => setToggle(drawerToggle, false))\n  )\n    .subscribe()\n\n/* Listener: open search on focus */\nconst query = getElement(\"[data-md-component=query]\")!\nif (query) {\n  fromEvent(query, \"focus\")\n    .pipe(\n      tap(() => setToggle(searchToggle, true))\n    )\n      .subscribe()\n}\n\n/* Listener: focus input after opening search */\nfromEvent(searchToggle, \"change\")\n  .pipe(\n    filter(() => searchToggle.checked),\n    delay(400),\n    tap(() => query.focus())\n  )\n    .subscribe()\n\n// data-md-toggle!\nfunction setToggle(toggle: HTMLInputElement, active: boolean): void {\n  if (toggle.checked !== active) {\n    toggle.checked = active\n    toggle.dispatchEvent(new CustomEvent(\"change\"))\n  }\n}\n\n// ----------------------------------------------------------------------------\n\n// Asynchronously load a document\nfunction load(url: string) {\n\n  const options: AjaxRequest = {\n    responseType: \"document\",\n    withCredentials: true\n  } // TODO: remove favicon from source!? patch...\n\n  return ajax({ url, ...options })\n    .pipe(\n      map(({ response }) => {\n        if (!(response instanceof Document)) // TODO: what to do in case of error?\n          throw Error(\"Unknown error...\")\n\n        return response\n      })\n    )\n}\n\n// ----------------------------------------------------------------------------\n\n// function isLocal(el: HTMLAnchorElement): boolean {\n//   return /(:\\/\\/|^#[^\\/]+$)/.test(el.getAttribute(\"href\")!)\n// }\n\nexport function app(config: any) {\n  console.log(\"called app with\", config)\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { Observable, combineLatest } from \"rxjs\"\nimport {\n  distinctUntilChanged,\n  map,\n  pluck,\n  shareReplay\n} from \"rxjs/operators\"\n\nimport { ViewportOffset, ViewportSize } from \"../../ui\"\nimport { Header } from \"../header\"\n\n/* ----------------------------------------------------------------------------\n * Types\n * ------------------------------------------------------------------------- */\n\n/**\n * Main area\n */\nexport interface Main {\n  offset: number                       /* Main area top offset */\n  height: number                       /* Main area visible height */\n  active: boolean                      /* Scrolled past top offset */\n}\n\n/* ----------------------------------------------------------------------------\n * Function types\n * ------------------------------------------------------------------------- */\n\n/**\n * Watch options\n */\ninterface WatchOptions {\n  size$: Observable<ViewportSize>      /* Viewport size observable */\n  offset$: Observable<ViewportOffset>  /* Viewport offset observable */\n  header$: Observable<Header>          /* Header observable */\n}\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Create an observable to watch the main area\n *\n * @param el - Main area element\n * @param options - Options\n *\n * @return Main area observable\n */\nexport function watchMain(\n  el: HTMLElement, { size$, offset$, header$ }: WatchOptions\n): Observable<Main> {\n\n  /* Compute necessary adjustment for header */\n  const adjust$ = header$\n    .pipe(\n      pluck(\"height\")\n    )\n\n  /* Compute the main area's visible height */\n  const height$ = combineLatest(offset$, size$, adjust$)\n    .pipe(\n      map(([{ y }, { height }, adjust]) => {\n        const top    = el.offsetTop\n        const bottom = el.offsetHeight + top\n        return height\n          - Math.max(0, top    - y,  adjust)\n          - Math.max(0, height + y - bottom)\n      }),\n      distinctUntilChanged()\n    )\n\n  /* Compute whether the viewport offset is past the main area's top */\n  const active$ = combineLatest(offset$, adjust$)\n    .pipe(\n      map(([{ y }, adjust]) => y >= el.offsetTop - adjust),\n      distinctUntilChanged()\n    )\n\n  /* Combine into a single hot observable */\n  return combineLatest(height$, adjust$, active$)\n    .pipe(\n      map(([height, adjust, active]) => ({\n        offset: el.offsetTop - adjust,\n        height,\n        active\n      })),\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n","/*\n * Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\nimport { difference, reverse } from \"ramda\"\nimport {\n  MonoTypeOperatorFunction,\n  Observable,\n  animationFrameScheduler,\n  combineLatest,\n  pipe\n} from \"rxjs\"\nimport {\n  distinctUntilChanged,\n  finalize,\n  map,\n  observeOn,\n  scan,\n  shareReplay,\n  switchMap,\n  tap\n} from \"rxjs/operators\"\n\nimport { ViewportOffset, ViewportSize, getElement } from \"../../../ui\"\nimport { Header } from \"../../header\"\nimport {\n  resetAnchorActive,\n  resetAnchorBlur,\n  setAnchorActive,\n  setAnchorBlur\n} from \"../element\"\n\n/* ----------------------------------------------------------------------------\n * Types\n * ------------------------------------------------------------------------- */\n\n/**\n * Anchor list\n */\nexport interface AnchorList {\n  done: HTMLAnchorElement[][]          /* Done anchors */\n  next: HTMLAnchorElement[][]          /* Next anchors */\n}\n\n/* ----------------------------------------------------------------------------\n * Function types\n * ------------------------------------------------------------------------- */\n\n/**\n * Watch options\n */\ninterface WatchOptions {\n  size$: Observable<ViewportSize>      /* Viewport size observable */\n  offset$: Observable<ViewportOffset>  /* Viewport offset observable */\n  header$: Observable<Header>          /* Header observable */\n}\n\n/* ----------------------------------------------------------------------------\n * Functions\n * ------------------------------------------------------------------------- */\n\n/**\n * Create an observable to watch an anchor list\n *\n * This is effectively a scroll-spy implementation which will account for the\n * fixed header and automatically re-calculate anchor offsets when the viewport\n * is resized. The returned observable will only emit if the anchor list needs\n * to be repainted.\n *\n * This implementation tracks an anchor element's entire path starting from its\n * level up to the top-most anchor element, e.g. `[h3, h2, h1]`. Although the\n * Material theme currently doesn't make use of this information, it enables\n * the styling of the entire hierarchy through customization.\n *\n * @param els - Anchor elements\n * @param options - Options\n *\n * @return Anchor list observable\n */\nexport function watchAnchorList(\n  els: HTMLAnchorElement[], { size$, offset$, header$ }: WatchOptions\n): Observable<AnchorList> {\n  const table = new Map<HTMLAnchorElement, HTMLElement>()\n  for (const el of els) {\n    const id = decodeURIComponent(el.hash.substring(1))\n    const target = getElement(`[id=\"${id}\"]`)\n    if (typeof target !== \"undefined\")\n      table.set(el, target)\n  }\n\n  /* Compute necessary adjustment for header */\n  const adjust$ = header$\n    .pipe(\n      map(header => 18 + header.height)\n    )\n\n  /* Compute partition of done and next anchors */\n  const partition$ = size$.pipe(\n\n    /* Build index to map anchor paths to vertical offsets */\n    map(() => {\n      let path: HTMLAnchorElement[] = []\n      return [...table].reduce((index, [anchor, target]) => {\n        while (path.length) {\n          const last = table.get(path[path.length - 1])!\n          if (last.tagName >= target.tagName) {\n            path.pop()\n          } else {\n            break\n          }\n        }\n        return index.set(\n          reverse(path = [...path, anchor]),\n          target.offsetTop\n        )\n      }, new Map<HTMLAnchorElement[], number>())\n    }),\n\n    /* Re-compute partition when viewport offset changes */\n    switchMap(index => combineLatest(offset$, adjust$)\n      .pipe(\n        scan(([done, next], [{ y }, adjust]) => {\n\n          /* Look forward */\n          while (next.length) {\n            const [, offset] = next[0]\n            if (offset - adjust < y) {\n              done = [...done, next.shift()!]\n            } else {\n              break\n            }\n          }\n\n          /* Look backward */\n          while (done.length) {\n            const [, offset] = done[done.length - 1]\n            if (offset - adjust >= y) {\n              next = [done.pop()!, ...next]\n            } else {\n              break\n            }\n          }\n\n          /* Return partition */\n          return [done, next]\n        }, [[], [...index]]),\n        distinctUntilChanged((a, b) => {\n          return a[0] === b[0]\n              && a[1] === b[1]\n        })\n      )\n    )\n  )\n\n  /* Extract anchor list and return hot observable */\n  return partition$\n    .pipe(\n      map(([done, next]) => ({\n        done: done.map(([path]) => path),\n        next: next.map(([path]) => path)\n      })),\n      shareReplay({ bufferSize: 1, refCount: true })\n    )\n}\n\n/* ------------------------------------------------------------------------- */\n\n/**\n * Paint anchor list from source observable\n *\n * This operator function will keep track of the anchor list in-between emits\n * in order to optimize rendering by only repainting anchor list migrations.\n * After determining which anchors need to be repainted, the actual rendering\n * is deferred to the next animation frame.\n *\n * @param els - Anchor elements\n *\n * @return Operator function\n */\nexport function paintAnchorList(\n  els: HTMLAnchorElement[]\n): MonoTypeOperatorFunction<AnchorList> {\n  return pipe(\n\n    /* Extract anchor list migrations only */\n    scan<AnchorList>((a, b) => {\n      const begin = Math.max(0, Math.min(b.done.length, a.done.length) - 1)\n      const end   = Math.max(b.done.length, a.done.length)\n      return {\n        done: b.done.slice(begin, end + 1),\n        next: difference(b.next, a.next)\n      }\n    }, { done: [], next: [] }),\n\n    /* Defer repaint to next animation frame */\n    observeOn(animationFrameScheduler),\n    tap(({ done, next }) => {\n\n      /* Look forward */\n      for (const [el] of next) {\n        resetAnchorActive(el)\n        resetAnchorBlur(el)\n      }\n\n      /* Look backward */\n      for (const [index, [el]] of done.entries()) {\n        setAnchorActive(el, index === done.length - 1)\n        setAnchorBlur(el, true)\n      }\n    }),\n\n    /* Reset on complete or error */\n    finalize(() => {\n      for (const el of els) {\n        resetAnchorActive(el)\n        resetAnchorBlur(el)\n      }\n    })\n  )\n}\n"],"sourceRoot":""}